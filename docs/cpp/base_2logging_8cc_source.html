<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OR-Tools: logging.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheet.tmp.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OR-Tools
   &#160;<span id="projectnumber">9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('base_2logging_8cc_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">base/logging.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="base_2logging_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2010-2021 Google LLC</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// You may obtain a copy of the License at</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// limitations under the License.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="base_2logging_8h.html">ortools/base/logging.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a369266c24eacffb87046522897a570d5">   16</a></span>&#160;<span class="preprocessor">#define _GNU_SOURCE 1  // needed for O_NOFOLLOW and pread()/pwrite()</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;mutex&gt;</span>  <span class="comment">// for std::call_once and std::once_flag.  // NOLINT</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">io.h</a>&gt;</span>     <span class="comment">// lseek</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span> <span class="comment">/* for _strnicmp(), strerror_s() */</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span>   <span class="comment">/* for localtime_s() */</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;pwd.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;sys/utsname.h&gt;</span>  <span class="comment">// For uname.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;syslog.h&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span>  <span class="comment">// For _exit.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span>  <span class="comment">// for errno</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;climits&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;absl/debugging/stacktrace.h&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;absl/time/time.h&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="commandlineflags_8h.html">ortools/base/commandlineflags.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="logging__utilities_8h.html">ortools/base/logging_utilities.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__logging_8h.html">ortools/base/raw_logging.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<a class="code" href="base_2logging_8cc.html#a31902dd802cefb2e7082b1f31fc0ab8b">ABSL_DECLARE_FLAG</a>(<span class="keywordtype">bool</span>, log_prefix);</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<a class="code" href="base_2logging_8cc.html#a31902dd802cefb2e7082b1f31fc0ab8b">ABSL_DECLARE_FLAG</a>(<span class="keywordtype">bool</span>, logtostderr);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;std::once_flag init_done;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="base_2logging_8h.html#adc29f16e0cd8a868b42ac92d5fc437b9">   61</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="base_2logging_8cc.html#adc29f16e0cd8a868b42ac92d5fc437b9">FixFlagsAndEnvironmentForSwig</a>() {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  std::call_once(init_done, [] { <a class="code" href="namespacegoogle.html#a1749056ff206ebc4f581e6bc0bae841d">google::InitGoogleLogging</a>(<span class="stringliteral">&quot;swig_helper&quot;</span>); });</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  absl::SetFlag(&amp;FLAGS_logtostderr, <span class="keyword">true</span>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  absl::SetFlag(&amp;FLAGS_log_prefix, <span class="keyword">false</span>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">using</span> std::dec;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">using</span> std::hex;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">using</span> <a class="code" href="alldiff__cst_8cc.html#ad10edae0a852d72fb76afb1c77735045">std::min</a>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">using</span> std::ostream;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">using</span> std::ostringstream;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keyword">using</span> std::setfill;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">using</span> std::setw;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keyword">using</span> std::string;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">using</span> std::vector;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">using</span> std::fclose;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">using</span> std::fflush;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">using</span> std::FILE;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">using</span> std::fprintf;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">using</span> std::fwrite;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">using</span> std::perror;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#define fdopen _fdopen</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#define strcasecmp _stricmp</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#ifndef __MINGW32__</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keyword">enum</span> { STDIN_FILENO = 0, STDOUT_FILENO = 1, STDERR_FILENO = 2 };</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">char</span>* strerror_r(<span class="keywordtype">int</span> errnum, <span class="keywordtype">char</span>* buf, <span class="keywordtype">size_t</span> buflen) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  strerror_s(buf, buflen, errnum);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> buf;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">inline</span> <span class="keyword">struct </span>tm* localtime_r(<span class="keyword">const</span> time_t* timep, <span class="keyword">struct</span> tm* result) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  localtime_s(result, timep);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, logtostderr, <span class="keyword">false</span>,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          <span class="stringliteral">&quot;log messages go to stderr instead of logfiles&quot;</span>);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, alsologtostderr, <span class="keyword">false</span>,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;          <span class="stringliteral">&quot;log messages go to stderr in addition to logfiles&quot;</span>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, colorlogtostderr, <span class="keyword">false</span>,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;          <span class="stringliteral">&quot;color messages logged to stderr (if supported by terminal)&quot;</span>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">#if defined(__linux__)</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, drop_log_memory, <span class="keyword">true</span>,</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;          <span class="stringliteral">&quot;Drop in-memory buffers of log contents. &quot;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <span class="stringliteral">&quot;Logs can grow very quickly and they are rarely read before they &quot;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;          <span class="stringliteral">&quot;need to be evicted from memory. Instead, drop them from memory &quot;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;          <span class="stringliteral">&quot;as soon as they are flushed to disk.&quot;</span>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">// By default, errors (including fatal errors) get logged to stderr as</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">// well as the file.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// The default is ERROR instead of FATAL so that users can see problems</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">// when they run a program without having to look in another file.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, stderrthreshold, <a class="code" href="namespacegoogle.html#aec61ff6c741224bbf1d230d40449aa30">google::GLOG_ERROR</a>,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;          <span class="stringliteral">&quot;log messages at or above this level are copied to stderr in &quot;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;          <span class="stringliteral">&quot;addition to logfiles.  This flag obsoletes --alsologtostderr.&quot;</span>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, log_prefix, <span class="keyword">true</span>,</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          <span class="stringliteral">&quot;Prepend the log prefix to the start of each log line&quot;</span>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, minloglevel, 0,</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;          <span class="stringliteral">&quot;Messages logged at a lower level than this don&#39;t &quot;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;          <span class="stringliteral">&quot;actually get logged anywhere&quot;</span>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, logbuflevel, 0,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;          <span class="stringliteral">&quot;Buffer log messages logged at this level or lower&quot;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;          <span class="stringliteral">&quot; (-1 means don&#39;t buffer; 0 means buffer INFO only;&quot;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <span class="stringliteral">&quot; ...)&quot;</span>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, logbufsecs, 30,</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;          <span class="stringliteral">&quot;Buffer log messages for at most this many seconds&quot;</span>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// Compute the default value for --log_dir</span></div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#ab72362766bf1498f7ba9efb428cb460f">  141</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="base_2logging_8cc.html#ab72362766bf1498f7ba9efb428cb460f">DefaultLogDir</a>() {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* env;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  env = getenv(<span class="stringliteral">&quot;GOOGLE_LOG_DIR&quot;</span>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (env != NULL &amp;&amp; env[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> env;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  env = getenv(<span class="stringliteral">&quot;TEST_TMPDIR&quot;</span>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (env != NULL &amp;&amp; env[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> env;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, logfile_mode, 0664, <span class="stringliteral">&quot;Log file mode/permissions.&quot;</span>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(std::string, log_dir, <a class="code" href="base_2logging_8cc.html#ab72362766bf1498f7ba9efb428cb460f">DefaultLogDir</a>(),</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;          <span class="stringliteral">&quot;If specified, logfiles are written into this directory instead &quot;</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;          <span class="stringliteral">&quot;of the default logging directory.&quot;</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(std::string, log_link, <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          <span class="stringliteral">&quot;Put additional links to the log &quot;</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;          <span class="stringliteral">&quot;files in this directory&quot;</span>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, max_log_size, 1800,</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;          <span class="stringliteral">&quot;approx. maximum log file size (in MB). A value of 0 will &quot;</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;          <span class="stringliteral">&quot;be silently overridden to 1.&quot;</span>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, stop_logging_if_full_disk, <span class="keyword">false</span>,</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          <span class="stringliteral">&quot;Stop attempting to log to disk if the disk is full.&quot;</span>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<a class="code" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(std::string, log_backtrace_at, <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          <span class="stringliteral">&quot;Emit a backtrace when logging at file:linenum.&quot;</span>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#define PATH_SEPARATOR &#39;\\&#39;</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a256a5721249aa3309437212cc21a9fe4">  176</a></span>&#160;<span class="preprocessor">#define PATH_SEPARATOR &#39;/&#39;</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#include &lt;basetsd.h&gt;</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#define ssize_t SSIZE_T</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="keyword">static</span> ssize_t pread(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span>* buf, <span class="keywordtype">size_t</span> count, off_t offset) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  off_t orig_offset = lseek(fd, 0, SEEK_CUR);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span> (orig_offset == (off_t)-1) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span> (lseek(fd, offset, SEEK_CUR) == (off_t)-1) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  ssize_t len = read(fd, buf, count);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">if</span> (len &lt; 0) <span class="keywordflow">return</span> len;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">if</span> (lseek(fd, orig_offset, SEEK_SET) == (off_t)-1) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keywordflow">return</span> len;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keyword">static</span> ssize_t pwrite(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span>* buf, <span class="keywordtype">size_t</span> count, off_t offset) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  off_t orig_offset = lseek(fd, 0, SEEK_CUR);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">if</span> (orig_offset == (off_t)-1) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">if</span> (lseek(fd, offset, SEEK_CUR) == (off_t)-1) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  ssize_t len = write(fd, buf, count);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordflow">if</span> (len &lt; 0) <span class="keywordflow">return</span> len;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">if</span> (lseek(fd, orig_offset, SEEK_SET) == (off_t)-1) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">return</span> len;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#endif  // _MSC_VER</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">  203</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">GetHostName</a>(<span class="keywordtype">string</span>* hostname) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#if !defined(_MSC_VER)</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">struct </span>utsname buf;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span> (0 != uname(&amp;buf)) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// ensure null termination on failure</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    *buf.nodename = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  *hostname = buf.nodename;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#else   // _MSC_VER</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordtype">char</span> buf[MAX_COMPUTERNAME_LENGTH + 1];</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  DWORD len = MAX_COMPUTERNAME_LENGTH + 1;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (GetComputerNameA(buf, &amp;len)) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    *hostname = buf;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    hostname-&gt;clear();</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#endif  // _MSC_VER</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// Returns true iff terminal supports using colors in output.</span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#aafcef7778dce8f10842b9fa8f1266639">  223</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="base_2logging_8cc.html#aafcef7778dce8f10842b9fa8f1266639">TerminalSupportsColor</a>() {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordtype">bool</span> term_supports_color = <span class="keyword">false</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// on Windows TERM variable is usually not set, but the console does</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// support colors.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  term_supports_color = <span class="keyword">true</span>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// On non-Windows platforms, we rely on the TERM variable.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> term = getenv(<span class="stringliteral">&quot;TERM&quot;</span>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (term != NULL &amp;&amp; term[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    term_supports_color =</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        !strcmp(term, <span class="stringliteral">&quot;xterm&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;xterm-color&quot;</span>) ||</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        !strcmp(term, <span class="stringliteral">&quot;xterm-256color&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;screen-256color&quot;</span>) ||</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        !strcmp(term, <span class="stringliteral">&quot;konsole&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;konsole-16color&quot;</span>) ||</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        !strcmp(term, <span class="stringliteral">&quot;konsole-256color&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;screen&quot;</span>) ||</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        !strcmp(term, <span class="stringliteral">&quot;linux&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;cygwin&quot;</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">return</span> term_supports_color;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacegoogle.html">google</a> {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">  246</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> { <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>, <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">COLOR_RED</a>, <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02">COLOR_GREEN</a>, <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">COLOR_YELLOW</a> };</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a1d1a2cfb1e7c80c14baccc762df3df3f">  248</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> <a class="code" href="namespacegoogle.html#a1d1a2cfb1e7c80c14baccc762df3df3f">SeverityToColor</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  assert(severity &gt;= 0 &amp;&amp; severity &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> color = <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">switch</span> (severity) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#af3c2db675e75f2074724f754d3cf7885">GLOG_INFO</a>:</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      color = <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#a060366d0d0ff85fce6de37e905fea54c">GLOG_WARNING</a>:</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      color = <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">COLOR_YELLOW</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#aec61ff6c741224bbf1d230d40449aa30">GLOG_ERROR</a>:</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a>:</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      color = <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">COLOR_RED</a>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="comment">// should never get here.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      assert(<span class="keyword">false</span>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">return</span> color;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">// Returns the character attribute for the given color.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="keyword">static</span> WORD GetColorAttribute(<a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> color) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordflow">switch</span> (color) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">COLOR_RED</a>:</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">return</span> FOREGROUND_RED;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02">COLOR_GREEN</a>:</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span> FOREGROUND_GREEN;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">COLOR_YELLOW</a>:</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">return</span> FOREGROUND_RED | FOREGROUND_GREEN;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#else  // _MSC_VER</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">// Returns the ANSI color code for the given color.</span></div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a40cb559795a506a869f6643c1bd949ca">  288</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacegoogle.html#a40cb559795a506a869f6643c1bd949ca">GetAnsiColorCode</a>(<a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> color) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">switch</span> (color) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">COLOR_RED</a>:</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;1&quot;</span>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02">COLOR_GREEN</a>:</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;2&quot;</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">COLOR_YELLOW</a>:</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;3&quot;</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>:</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">return</span> NULL;  <span class="comment">// stop warning about return type.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#endif  // !_MSC_VER</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// Safely get max_log_size, overriding to 1 if it somehow gets defined as 0</span></div><div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aab2b99122a259ede199e6872c7f367bf">  305</a></span>&#160;<span class="keyword">static</span> int32_t <a class="code" href="namespacegoogle.html#aab2b99122a259ede199e6872c7f367bf">MaxLogSize</a>() {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">return</span> (absl::GetFlag(FLAGS_max_log_size) &gt; 0</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;              ? absl::GetFlag(FLAGS_max_log_size)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;              : 1);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">// An arbitrary limit on the length of a single log message.  This</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">// is so that streaming can be done more efficiently.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="classgoogle_1_1_log_message.html#ab56904740774e794fb63d946debb899f">LogMessage::kMaxLogMessageLen</a> = 30000;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html">  315</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a> {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aefae0ad3d1d866302a3d246ad4f03a32">LogMessageData</a>();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">  318</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a>;  <span class="comment">// preserved errno</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// Buffer space; contains complete message text.</span></div><div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">  320</a></span>&#160;  <span class="keywordtype">char</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[<a class="code" href="classgoogle_1_1_log_message.html#ab56904740774e794fb63d946debb899f">LogMessage::kMaxLogMessageLen</a> + 1];</div><div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">  321</a></span>&#160;  <a class="code" href="classgoogle_1_1_log_message_1_1_log_stream.html">LogStream</a> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>;</div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">  322</a></span>&#160;  <span class="keywordtype">char</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>;  <span class="comment">// What level is this LogMessage logged at?</span></div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">  323</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>;       <span class="comment">// line number where logging call is.</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">  324</a></span>&#160;  void (<a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>::*<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">send_method_</a>)();  <span class="comment">// Call this in destructor to send</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keyword">union </span>{  <span class="comment">// At most one of these is used: union to keep the size low.</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">  326</a></span>&#160;    <a class="code" href="classgoogle_1_1_log_sink.html">LogSink</a>* <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a>;                     <span class="comment">// NULL or sink to send message to</span></div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">  327</a></span>&#160;    std::vector&lt;std::string&gt;* <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a>;  <span class="comment">// NULL or vector to push message onto</span></div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">  328</a></span>&#160;    std::string* <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">message_</a>;              <span class="comment">// NULL or string to write message into</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  };</div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">  330</a></span>&#160;  time_t <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a>;            <span class="comment">// Time of creation of LogMessage</span></div><div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">  331</a></span>&#160;  struct ::tm <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>;         <span class="comment">// Time of creation of LogMessage</span></div><div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">  332</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;     <span class="comment">// # of chars of prefix in this message</span></div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">  333</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>;     <span class="comment">// # of chars of msg to send to log</span></div><div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">  334</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">num_chars_to_syslog_</a>;  <span class="comment">// # of chars of msg to send to syslog</span></div><div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">  335</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>;        <span class="comment">// basename of file that called LOG</span></div><div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">  336</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>;        <span class="comment">// fullname of file that called LOG</span></div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">  337</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">has_been_flushed_</a>;       <span class="comment">// false =&gt; data has not been flushed</span></div><div class="line"><a name="l00338"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">  338</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a>;            <span class="comment">// true =&gt; this was first fatal msg</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aefae0ad3d1d866302a3d246ad4f03a32">LogMessageData</a>(<span class="keyword">const</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessageData</a>&amp;);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessageData</a>&amp;);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;};</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">// A absl::Mutex that allows only one thread to log at a time, to keep things</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">// from getting jumbled.  Some other very uncommon logging operations (like</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">// changing the destination file for log messages of a given severity) also</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">// lock this absl::Mutex.  Please be sure that anybody who might possibly need</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">// to lock it does so.</span></div><div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">  350</a></span>&#160;<span class="keyword">static</span> absl::Mutex <a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">// Number of messages sent at each severity.  Under log_mutex.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;int64_t LogMessage::num_messages_[<a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>] = {0, 0, 0, 0};</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">// Globally disable log writing (if disk is full)</span></div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">  356</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">stop_writing</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">  358</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[<a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>] = {<span class="stringliteral">&quot;INFO&quot;</span>, <span class="stringliteral">&quot;WARNING&quot;</span>,</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                                      <span class="stringliteral">&quot;ERROR&quot;</span>, <span class="stringliteral">&quot;FATAL&quot;</span>};</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">// Has the user called SetExitOnDFatal(true)?</span></div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">  362</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a60193b592b1a0e1d930682ade407ad63">  364</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacegoogle.html#a60193b592b1a0e1d930682ade407ad63">GetLogSeverityName</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity];</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_logger.html#a0d77f27eb95c246d555904aaf08018eb">  368</a></span>&#160;<a class="code" href="classgoogle_1_1base_1_1_logger.html#a0d77f27eb95c246d555904aaf08018eb">base::Logger::~Logger</a>() {}</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">// Encapsulates all file-system related state</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="keyword">class </span>LogFileObject : <span class="keyword">public</span> <a class="code" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a> {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  LogFileObject(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  ~LogFileObject();</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> Write(<span class="keywordtype">bool</span> force_flush,  <span class="comment">// Should we force a flush here?</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                     time_t timestamp,  <span class="comment">// Timestamp for this entry</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">int</span> message_len);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// Configuration options</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordtype">void</span> SetBasename(<span class="keyword">const</span> <span class="keywordtype">char</span>* basename);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordtype">void</span> SetExtension(<span class="keyword">const</span> <span class="keywordtype">char</span>* ext);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordtype">void</span> SetSymlinkBasename(<span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// Normal flushing routine</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keyword">virtual</span> <span class="keywordtype">void</span> Flush();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">// It is the actual file length for the system loggers,</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// i.e., INFO, ERROR, etc.</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keyword">virtual</span> uint32_t LogSize() {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    absl::MutexLock l(&amp;lock_);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> file_length_;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// Internal flush routine.  Exposed so that FlushLogFilesUnsafe()</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">// can avoid grabbing a lock.  Usually Flush() calls it after</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// acquiring lock_.</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">void</span> FlushUnlocked();</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t kRolloverAttemptFrequency = 0x20;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  absl::Mutex lock_;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordtype">bool</span> base_filename_selected_;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordtype">string</span> base_filename_;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordtype">string</span> symlink_basename_;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordtype">string</span> filename_extension_;  <span class="comment">// option users can specify (eg to add port#)</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  FILE* file_;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity_;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  uint32_t bytes_since_flush_;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  uint32_t dropped_mem_length_;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  uint32_t file_length_;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rollover_attempt_;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  int64_t next_flush_time_;  <span class="comment">// cycle count at which to flush log</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="comment">// Actually create a logfile using the value of base_filename_ and the</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// supplied argument time_pid_string</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="comment">// REQUIRES: lock_ is held</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordtype">bool</span> CreateLogfile(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; time_pid_string);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;};</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html">  426</a></span>&#160;<span class="keyword">class </span><a class="code" href="classgoogle_1_1_log_destination.html">LogDestination</a> {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; <span class="keyword">public</span>:</div><div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a5f3880ffd53f58af933af4f226389744">  428</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#afe9db80601fc823372a09c832a802529">ReprintFatalMessage</a>();</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keyword">friend</span> <a class="code" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a>* <a class="code" href="namespacegoogle_1_1base.html#a50d33a682377552803e3bda0568358ad">base::GetLogger</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle_1_1base.html#a754a333359f5c02714711bb4e01417b0">base::SetLogger</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a>, <a class="code" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a>*);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// These methods are just forwarded to by their global versions.</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a52b012381ca169c60f696aeeb54a9d77">SetLogDestination</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a9800270f9c517ac3c4f1a69d2d79d1ff">SetLogSymlink</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#aac637fad473b5677c3f94fb8372257b0">AddLogSink</a>(<a class="code" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#afb08de7bff9aaa916db76a47bcd9077a">RemoveLogSink</a>(<a class="code" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a45f04ff1beb3af3882c99d3b63616dde">SetLogFilenameExtension</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename_extension);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a57ac69eb66761ee6406d5e4a3f33ff87">SetStderrLogging</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#ab90a343a65dff8ffc12a5133fd8dcbaf">LogToStderr</a>();</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// Flush all log files that are at least at the given severity level</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#ad0cffd6498cbf357c5f3c1b7c3683c84">FlushLogFiles</a>(<span class="keywordtype">int</span> min_severity);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a27fd092cfd7530a45451a8e0b0fcdf8e">FlushLogFilesUnsafe</a>(<span class="keywordtype">int</span> min_severity);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// we set the maximum size of our packet to be 1400, the logic being</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// to prevent fragmentation.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// Really this number is arbitrary.</span></div><div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a522dcf1d8b631c3910fb1d594b9093ee">  449</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNetworkBytes = 1400;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; hostname();</div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#ad4e8b6d60d503dfde0b01d1311a3c820">  452</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; <a class="code" href="classgoogle_1_1_log_destination.html#ad4e8b6d60d503dfde0b01d1311a3c820">terminal_supports_color</a>() {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">return</span> terminal_supports_color_;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> DeleteLogDestinations();</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; <span class="keyword">private</span>:</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html">LogDestination</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  ~<a class="code" href="classgoogle_1_1_log_destination.html">LogDestination</a>() {}</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="comment">// Take a log message of a particular severity and log it to stderr</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// iff it&#39;s of a high enough severity to deserve it.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> MaybeLogToStderr(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                               <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// Take a log message of a particular severity and log it to a file</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// iff the base filename is not &quot;&quot; (which means &quot;don&#39;t log to me&quot;)</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> MaybeLogToLogfile(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, time_t timestamp,</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">// Take a log message of a particular severity and log it to the file</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="comment">// for that severity and also for all files with severity less than</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="comment">// this severity.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> LogToAllLogfiles(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, time_t timestamp,</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                               <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// Send logging info to all registered sinks.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> LogToSinks(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* full_filename,</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename, <span class="keywordtype">int</span> line,</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                         <span class="keyword">const</span> struct ::tm* tm_time, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                         <span class="keywordtype">size_t</span> message_len);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="comment">// Wait for all registered sinks via WaitTillSent</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="comment">// including the optional one in &quot;data&quot;.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">void</span> WaitForSinks(LogMessage::LogMessageData* data);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keyword">static</span> LogDestination* log_destination(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  LogFileObject fileobject_;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  base::Logger* logger_;  <span class="comment">// Either &amp;fileobject_, or wrapper around it</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keyword">static</span> LogDestination* log_destinations_[<a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>];</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">string</span> addresses_;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">string</span> hostname_;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> terminal_supports_color_;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// arbitrary global logging destinations.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keyword">static</span> vector&lt;LogSink*&gt;* sinks_;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="comment">// Protects the vector sinks_,</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// but not the LogSink objects its elements reference.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keyword">static</span> absl::Mutex sink_mutex_;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="comment">// Disallow</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  LogDestination(<span class="keyword">const</span> LogDestination&amp;);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  LogDestination&amp; operator=(<span class="keyword">const</span> LogDestination&amp;);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;};</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="keywordtype">string</span> LogDestination::addresses_;  <span class="comment">// NOLINT</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="keywordtype">string</span> LogDestination::hostname_;   <span class="comment">// NOLINT</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;vector&lt;LogSink*&gt;* LogDestination::sinks_ = NULL;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;absl::Mutex LogDestination::sink_mutex_;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="keywordtype">bool</span> LogDestination::terminal_supports_color_ = <a class="code" href="base_2logging_8cc.html#aafcef7778dce8f10842b9fa8f1266639">TerminalSupportsColor</a>();</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">/* static */</span></div><div class="line"><a name="l00517"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#ae015332540cd90572adfe5e5588227c6">  517</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <a class="code" href="classgoogle_1_1_log_destination.html#ae015332540cd90572adfe5e5588227c6">LogDestination::hostname</a>() {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">if</span> (hostname_.empty()) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">GetHostName</a>(&amp;hostname_);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (hostname_.empty()) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      hostname_ = <span class="stringliteral">&quot;(unknown)&quot;</span>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keywordflow">return</span> hostname_;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;}</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;LogDestination::LogDestination(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename)</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    : fileobject_(severity, base_filename), logger_(&amp;fileobject_) {}</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a1bc1ccffe41da1564b1bec29b08fc4e1">  530</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#a1bc1ccffe41da1564b1bec29b08fc4e1">LogDestination::FlushLogFilesUnsafe</a>(<span class="keywordtype">int</span> min_severity) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">// assume we have the log_mutex or we simply don&#39;t care</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// about it</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = min_severity; i &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; i++) {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="classgoogle_1_1_log_destination.html">LogDestination</a>* log = log_destinations_[i];</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (log != NULL) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="comment">// Flush the base fileobject_ logger directly instead of going</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="comment">// through any wrappers to reduce chance of deadlock.</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      log-&gt;fileobject_.FlushUnlocked();</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#ae0bab6f35a5369aef2554e5569fffea6">  543</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#ae0bab6f35a5369aef2554e5569fffea6">LogDestination::FlushLogFiles</a>(<span class="keywordtype">int</span> min_severity) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="comment">// all this stuff.</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = min_severity; i &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; i++) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="classgoogle_1_1_log_destination.html">LogDestination</a>* log = log_destination(i);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (log != NULL) {</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      log-&gt;logger_-&gt;<a class="code" href="classgoogle_1_1base_1_1_logger.html#aff3353d816df11999ea7a0804b76e0c1">Flush</a>();</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">  555</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">LogDestination::SetLogDestination</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                              <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  assert(severity &gt;= 0 &amp;&amp; severity &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// all this stuff.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  log_destination(severity)-&gt;fileobject_.SetBasename(base_filename);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a67f05b74958c4c9f2a0b39df9581bf1c">  564</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#a67f05b74958c4c9f2a0b39df9581bf1c">LogDestination::SetLogSymlink</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                                          <span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <a class="code" href="base_2logging_8h.html#a7cc25402ecd7591b4c39934dd656b1f9">CHECK_GE</a>(severity, 0);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="base_2logging_8h.html#a4bd2e815ca2f702a4b6aa744b1ff3b82">CHECK_LT</a>(severity, <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  log_destination(severity)-&gt;fileobject_.SetSymlinkBasename(symlink_basename);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a043cd6b97be276f99eea8f0ea3ece475">  572</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#a043cd6b97be276f99eea8f0ea3ece475">LogDestination::AddLogSink</a>(<a class="code" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination) {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="comment">// all this stuff.</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  absl::MutexLock l(&amp;sink_mutex_);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">if</span> (!sinks_) sinks_ = <span class="keyword">new</span> vector&lt;LogSink*&gt;;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  sinks_-&gt;push_back(destination);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a141a4160dcfa07d47161821c7e143236">  580</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#a141a4160dcfa07d47161821c7e143236">LogDestination::RemoveLogSink</a>(<a class="code" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// all this stuff.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  absl::MutexLock l(&amp;sink_mutex_);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// This doesn&#39;t keep the sinks in order, but who cares?</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordflow">if</span> (sinks_) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = sinks_-&gt;size() - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">if</span> ((*sinks_)[i] == destination) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        (*sinks_)[i] = (*sinks_)[sinks_-&gt;size() - 1];</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        sinks_-&gt;pop_back();</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a799e2628a1c44ccc1c3017ece67f41e7">  596</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#a799e2628a1c44ccc1c3017ece67f41e7">LogDestination::SetLogFilenameExtension</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* ext) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// all this stuff.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> severity = 0; severity &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; ++severity) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    log_destination(severity)-&gt;fileobject_.SetExtension(ext);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">  605</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">LogDestination::SetStderrLogging</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity) {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  assert(min_severity &gt;= 0 &amp;&amp; min_severity &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// all this stuff.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  absl::SetFlag(&amp;FLAGS_stderrthreshold, min_severity);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;}</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a7d7631cb9c19962577211ac1a7a85c58">  613</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#a7d7631cb9c19962577211ac1a7a85c58">LogDestination::LogToStderr</a>() {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// *Don&#39;t* put this stuff in a absl::Mutex lock, since SetStderrLogging &amp;</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="comment">// SetLogDestination already do the locking!</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">SetStderrLogging</a>(0);  <span class="comment">// thus everything is &quot;also&quot; logged to stderr</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; ++i) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">SetLogDestination</a>(i, <span class="stringliteral">&quot;&quot;</span>);  <span class="comment">// &quot;&quot; turns off logging to a logfile</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">  622</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">ColoredWriteToStderr</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                                 <span class="keywordtype">size_t</span> len) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keyword">const</span> <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> color = (<a class="code" href="classgoogle_1_1_log_destination.html#ad4e8b6d60d503dfde0b01d1311a3c820">LogDestination::terminal_supports_color</a>() &amp;&amp;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                           absl::GetFlag(FLAGS_colorlogtostderr))</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                              ? <a class="code" href="namespacegoogle.html#a1d1a2cfb1e7c80c14baccc762df3df3f">SeverityToColor</a>(severity)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                              : <a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="comment">// Avoid using cerr from this module since we may get called during</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// exit code, and cerr may be partially or fully destroyed by then.</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a> == color) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    fwrite(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len, 1, stderr);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keyword">const</span> HANDLE stderr_handle = GetStdHandle(STD_ERROR_HANDLE);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="comment">// Gets the current text color.</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  CONSOLE_SCREEN_BUFFER_INFO buffer_info;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  GetConsoleScreenBufferInfo(stderr_handle, &amp;buffer_info);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keyword">const</span> WORD old_color_attrs = buffer_info.wAttributes;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="comment">// We need to flush the stream buffers into the console before each</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="comment">// SetConsoleTextAttribute call lest it affect the text that is already</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="comment">// printed but has not yet reached the console.</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  fflush(stderr);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  SetConsoleTextAttribute(stderr_handle,</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                          GetColorAttribute(color) | FOREGROUND_INTENSITY);</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  fwrite(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len, 1, stderr);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  fflush(stderr);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="comment">// Restores the text color.</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  SetConsoleTextAttribute(stderr_handle, old_color_attrs);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">#else   // !_MSC_VER</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  fprintf(stderr, <span class="stringliteral">&quot;\033[0;3%sm&quot;</span>, <a class="code" href="namespacegoogle.html#a40cb559795a506a869f6643c1bd949ca">GetAnsiColorCode</a>(color));</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  fwrite(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len, 1, stderr);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  fprintf(stderr, <span class="stringliteral">&quot;\033[m&quot;</span>);  <span class="comment">// Resets the terminal to default.</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="preprocessor">#endif  // !_MSC_VER</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;}</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">  660</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">WriteToStderr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// Avoid using cerr from this module since we may get called during</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// exit code, and cerr may be partially or fully destroyed by then.</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  fwrite(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len, 1, stderr);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::MaybeLogToStderr(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                                             <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">if</span> ((severity &gt;= absl::GetFlag(FLAGS_stderrthreshold)) ||</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      absl::GetFlag(FLAGS_alsologtostderr)) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">ColoredWriteToStderr</a>(severity, <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="comment">// On Windows, also output to the debugger</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    ::OutputDebugStringA(<span class="keywordtype">string</span>(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len).c_str());</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::MaybeLogToLogfile(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                              time_t timestamp,</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                              <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> should_flush = severity &gt; absl::GetFlag(FLAGS_logbuflevel);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  LogDestination* destination = log_destination(severity);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  destination-&gt;logger_-&gt;Write(should_flush, timestamp, <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::LogToAllLogfiles(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                                             time_t timestamp,</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                                             <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_logtostderr)) {  <span class="comment">// global flag: never log to file</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">ColoredWriteToStderr</a>(severity, <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = severity; i &gt;= 0; --i)</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      LogDestination::MaybeLogToLogfile(i, timestamp, <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::LogToSinks(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                                       <span class="keyword">const</span> <span class="keywordtype">char</span>* full_filename,</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                       <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename, <span class="keywordtype">int</span> line,</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                                       <span class="keyword">const</span> struct ::tm* tm_time,</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                       <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                       <span class="keywordtype">size_t</span> message_len) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  absl::ReaderMutexLock l(&amp;sink_mutex_);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordflow">if</span> (sinks_) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = sinks_-&gt;size() - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      (*sinks_)[i]-&gt;send(severity, full_filename, base_filename, line, tm_time,</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                         <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, message_len);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::WaitForSinks(LogMessage::LogMessageData* data) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  absl::ReaderMutexLock l(&amp;sink_mutex_);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">if</span> (sinks_) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = sinks_-&gt;size() - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      (*sinks_)[i]-&gt;WaitTillSent();</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> send_to_sink =</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      (data-&gt;send_method_ == &amp;LogMessage::SendToSink) ||</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      (data-&gt;send_method_ == &amp;LogMessage::SendToSinkAndLog);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">if</span> (send_to_sink &amp;&amp; data-&gt;sink_ != NULL) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    data-&gt;sink_-&gt;WaitTillSent();</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;}</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;LogDestination* LogDestination::log_destinations_[<a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>];</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="keyword">inline</span> LogDestination* LogDestination::log_destination(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity) {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  assert(severity &gt;= 0 &amp;&amp; severity &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="keywordflow">if</span> (!log_destinations_[severity]) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    log_destinations_[severity] = <span class="keyword">new</span> LogDestination(severity, NULL);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">return</span> log_destinations_[severity];</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#acf47431892ab03fd10d35def7d129a1a">  737</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_destination.html#acf47431892ab03fd10d35def7d129a1a">LogDestination::DeleteLogDestinations</a>() {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> severity = 0; severity &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; ++severity) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keyword">delete</span> log_destinations_[severity];</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    log_destinations_[severity] = NULL;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  absl::MutexLock l(&amp;sink_mutex_);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keyword">delete</span> sinks_;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  sinks_ = NULL;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="keyword">namespace </span>{</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;LogFileObject::LogFileObject(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename)</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    : base_filename_selected_(base_filename != NULL),</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      base_filename_((base_filename != NULL) ? base_filename : <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      symlink_basename_(logging_internal::<a class="code" href="namespacegoogle_1_1logging__internal.html#a43adca49683a5766aecb000c340e988c">ProgramInvocationShortName</a>()),</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      filename_extension_(),</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      file_(NULL),</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      severity_(severity),</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      bytes_since_flush_(0),</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      dropped_mem_length_(0),</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      file_length_(0),</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      rollover_attempt_(kRolloverAttemptFrequency - 1),</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      next_flush_time_(0) {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  assert(severity &gt;= 0);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  assert(severity &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;LogFileObject::~LogFileObject() {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  absl::MutexLock l(&amp;lock_);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">if</span> (file_ != NULL) {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    fclose(file_);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    file_ = NULL;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;}</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="keywordtype">void</span> LogFileObject::SetBasename(<span class="keyword">const</span> <span class="keywordtype">char</span>* basename) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  absl::MutexLock l(&amp;lock_);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  base_filename_selected_ = <span class="keyword">true</span>;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">if</span> (base_filename_ != basename) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">// Get rid of old log file since we are changing names</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> (file_ != NULL) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      fclose(file_);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      file_ = NULL;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      rollover_attempt_ = kRolloverAttemptFrequency - 1;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    base_filename_ = basename;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="keywordtype">void</span> LogFileObject::SetExtension(<span class="keyword">const</span> <span class="keywordtype">char</span>* ext) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  absl::MutexLock l(&amp;lock_);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">if</span> (filename_extension_ != ext) {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">// Get rid of old log file since we are changing names</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">if</span> (file_ != NULL) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      fclose(file_);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      file_ = NULL;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      rollover_attempt_ = kRolloverAttemptFrequency - 1;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    filename_extension_ = ext;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;}</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="keywordtype">void</span> LogFileObject::SetSymlinkBasename(<span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  absl::MutexLock l(&amp;lock_);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  symlink_basename_ = symlink_basename;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;}</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="keywordtype">void</span> LogFileObject::Flush() {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  absl::MutexLock l(&amp;lock_);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  FlushUnlocked();</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="keywordtype">void</span> LogFileObject::FlushUnlocked() {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordflow">if</span> (file_ != NULL) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    fflush(file_);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    bytes_since_flush_ = 0;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  }</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="comment">// Figure out when we are due for another flush.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keyword">const</span> int64_t <a class="code" href="constraint__solver_8cc.html#a395f613555f398dd389670bb4c2a4599">next</a> = (absl::GetFlag(FLAGS_logbufsecs) *</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                        static_cast&lt;int64_t&gt;(1000000));  <span class="comment">// in usec</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  next_flush_time_ =</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="namespacegoogle_1_1logging__internal.html#af8454039845aad804abcbabf98b68b23">logging_internal::CycleClock_Now</a>() + <a class="code" href="namespacegoogle_1_1logging__internal.html#aedfcd190e296797088cd453c4d6796a0">logging_internal::UsecToCycles</a>(<a class="code" href="constraint__solver_8cc.html#a395f613555f398dd389670bb4c2a4599">next</a>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="keywordtype">bool</span> LogFileObject::CreateLogfile(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; time_pid_string) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="keywordtype">string</span> string_filename =</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      base_filename_ + filename_extension_ + time_pid_string;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* filename = string_filename.c_str();</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordtype">int</span> fd = open(filename, O_WRONLY | O_CREAT | O_EXCL,</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                absl::GetFlag(FLAGS_logfile_mode));</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">if</span> (fd == -1) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="preprocessor">#if !defined(_MSC_VER)</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="comment">// Mark the file close-on-exec. We don&#39;t really care if this fails</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  fcntl(fd, F_SETFD, FD_CLOEXEC);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  file_ = fdopen(fd, <span class="stringliteral">&quot;a&quot;</span>);  <span class="comment">// Make a FILE*.</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">if</span> (file_ == NULL) {      <span class="comment">// Man, we&#39;re screwed!</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    close(fd);</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    unlink(filename);  <span class="comment">// Erase the half-baked evidence: an unusable log file</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="comment">// We try to create a symlink called &lt;program_name&gt;.&lt;severity&gt;,</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="comment">// which is easier to use.  (Every time we create a new logfile,</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// we destroy the old symlink and create a new one, so it always</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// points to the latest logfile.)  If it fails, we&#39;re sad but it&#39;s</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// no error.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="keywordflow">if</span> (!symlink_basename_.empty()) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="comment">// take directory from filename</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* slash = strrchr(filename, <a class="code" href="base_2logging_8cc.html#a256a5721249aa3309437212cc21a9fe4">PATH_SEPARATOR</a>);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span> linkname =</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        symlink_basename_ + <span class="charliteral">&#39;.&#39;</span> + <a class="code" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity_];</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordtype">string</span> linkpath;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> (slash)</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      linkpath = string(filename, slash - filename + 1);  <span class="comment">// get dirname</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    linkpath += linkname;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    unlink(linkpath.c_str());  <span class="comment">// delete old one if it exists</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="preprocessor">#if !defined(_MSC_VER)</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">// We must have unistd.h.</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="comment">// Make the symlink be relative (in the same dir) so that if the</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="comment">// entire log directory gets relocated the link is still valid.</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* linkdest = slash ? (slash + 1) : filename;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">if</span> (symlink(linkdest, linkpath.c_str()) != 0) {</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="comment">// silently ignore failures</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="comment">// Make an additional link to the log file in a place specified by</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="comment">// absl::GetFlag(FLAGS_log_link), if indicated</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_log_link).empty()) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      linkpath = absl::GetFlag(FLAGS_log_link) + <span class="stringliteral">&quot;/&quot;</span> + linkname;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      unlink(linkpath.c_str());  <span class="comment">// delete old one if it exists</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">if</span> (symlink(filename, linkpath.c_str()) != 0) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="comment">// silently ignore failures</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="preprocessor">#endif  // !_MSC_VER</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Everything worked</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;}</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="keywordtype">void</span> LogFileObject::Write(<span class="keywordtype">bool</span> force_flush, time_t timestamp,</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                          <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">int</span> message_len) {</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  absl::MutexLock l(&amp;lock_);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="comment">// We don&#39;t log if the base_name_ is &quot;&quot; (which means &quot;don&#39;t write&quot;)</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="keywordflow">if</span> (base_filename_selected_ &amp;&amp; base_filename_.empty()) {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordflow">if</span> (static_cast&lt;int&gt;(file_length_ &gt;&gt; 20) &gt;= <a class="code" href="namespacegoogle.html#aab2b99122a259ede199e6872c7f367bf">MaxLogSize</a>()) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordflow">if</span> (file_ != NULL) fclose(file_);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    file_ = NULL;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    file_length_ = bytes_since_flush_ = dropped_mem_length_ = 0;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    rollover_attempt_ = kRolloverAttemptFrequency - 1;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="comment">// If there&#39;s no destination file, make one before outputting</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">if</span> (file_ == NULL) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="comment">// Try to rollover the log file every 32 log messages.  The only time</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="comment">// this could matter would be when we have trouble creating the log</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="comment">// file.  If that happens, we&#39;ll lose lots of log messages, of course!</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> (++rollover_attempt_ != kRolloverAttemptFrequency) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    rollover_attempt_ = 0;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    struct ::tm tm_time;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    localtime_r(&amp;timestamp, &amp;tm_time);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="comment">// The logfile&#39;s filename will have the date/time &amp; pid in it</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    ostringstream time_pid_stream;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    time_pid_stream.fill(<span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    time_pid_stream &lt;&lt; 1900 + tm_time.tm_year &lt;&lt; setw(2) &lt;&lt; 1 + tm_time.tm_mon</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                    &lt;&lt; setw(2) &lt;&lt; tm_time.tm_mday &lt;&lt; <span class="charliteral">&#39;-&#39;</span> &lt;&lt; setw(2)</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    &lt;&lt; tm_time.tm_hour &lt;&lt; setw(2) &lt;&lt; tm_time.tm_min &lt;&lt; setw(2)</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    &lt;&lt; tm_time.tm_sec &lt;&lt; <span class="charliteral">&#39;.&#39;</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    &lt;&lt; <a class="code" href="namespacegoogle_1_1logging__internal.html#ac6be87e218241680245d9fac1b530ad4">logging_internal::GetMainThreadPid</a>();</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; time_pid_string = time_pid_stream.str();</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span> (base_filename_selected_) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">if</span> (!CreateLogfile(time_pid_string)) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        perror(<span class="stringliteral">&quot;Could not create log file&quot;</span>);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;COULD NOT CREATE LOGFILE &#39;%s&#39;!\n&quot;</span>,</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                time_pid_string.c_str());</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="comment">// If no base filename for logs of this severity has been set, use a</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="comment">// default base filename of</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="comment">// &quot;&lt;program name&gt;.&lt;hostname&gt;.&lt;user name&gt;.log.&lt;severity level&gt;.&quot;.  So</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="comment">// logfiles will have names like</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="comment">// webserver.examplehost.root.log.INFO.19990817-150000.4354, where</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="comment">// 19990817 is a date (1999 August 17), 150000 is a time (15:00:00),</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="comment">// and 4354 is the pid of the logging process.  The date &amp; time reflect</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <span class="comment">// when the file was created for output.</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="comment">// Where does the file get put?  Successively try the directories</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="comment">// &quot;/tmp&quot;, and &quot;.&quot;</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="keywordtype">string</span> stripped_filename(<a class="code" href="namespacegoogle_1_1logging__internal.html#a43adca49683a5766aecb000c340e988c">logging_internal::ProgramInvocationShortName</a>());</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="keywordtype">string</span> hostname;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <a class="code" href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">GetHostName</a>(&amp;hostname);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keywordtype">string</span> uidname = <a class="code" href="namespacegoogle_1_1logging__internal.html#a524ba2b8ce15ad01369c230545fc3ec6">logging_internal::MyUserName</a>();</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <span class="comment">// We should not call CHECK() here because this function can be</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="comment">// called after holding on to log_mutex. We don&#39;t want to</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="comment">// attempt to hold on to the same absl::Mutex, and get into a</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="comment">// deadlock. Simply use a name like invalid-user.</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">if</span> (uidname.empty()) uidname = <span class="stringliteral">&quot;invalid-user&quot;</span>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      stripped_filename = stripped_filename + <span class="charliteral">&#39;.&#39;</span> + hostname + <span class="charliteral">&#39;.&#39;</span> + uidname +</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                          <span class="stringliteral">&quot;.log.&quot;</span> + <a class="code" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity_] + <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="comment">// We&#39;re going to (potentially) try to put logs in several different dirs</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      <span class="keyword">const</span> vector&lt;string&gt;&amp; log_dirs = <a class="code" href="namespacegoogle.html#a9145952db85676dbaf27080ab7173b97">GetLoggingDirectories</a>();</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="comment">// Go through the list of dirs, and try to create the log file in each</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <span class="comment">// until we succeed or run out of options</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">for</span> (vector&lt;string&gt;::const_iterator dir = log_dirs.begin();</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;           dir != log_dirs.end(); ++dir) {</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        base_filename_ = *dir + <span class="stringliteral">&quot;/&quot;</span> + stripped_filename;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">if</span> (CreateLogfile(time_pid_string)) {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;          success = <span class="keyword">true</span>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      }</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="comment">// If we never succeeded, we have to give up</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">if</span> (success == <span class="keyword">false</span>) {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        perror(<span class="stringliteral">&quot;Could not create logging file&quot;</span>);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;COULD NOT CREATE A LOGGINGFILE %s!&quot;</span>,</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                time_pid_string.c_str());</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="comment">// Write a header message into the log file</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    ostringstream file_header_stream;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    file_header_stream.fill(<span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    file_header_stream &lt;&lt; <span class="stringliteral">&quot;Log file created at: &quot;</span> &lt;&lt; 1900 + tm_time.tm_year</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                       &lt;&lt; <span class="charliteral">&#39;/&#39;</span> &lt;&lt; setw(2) &lt;&lt; 1 + tm_time.tm_mon &lt;&lt; <span class="charliteral">&#39;/&#39;</span> &lt;&lt; setw(2)</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                       &lt;&lt; tm_time.tm_mday &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; setw(2) &lt;&lt; tm_time.tm_hour</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                       &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2) &lt;&lt; tm_time.tm_min &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2)</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                       &lt;&lt; tm_time.tm_sec &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;Running on machine: &quot;</span> &lt;&lt; <a class="code" href="classgoogle_1_1_log_destination.html#ae015332540cd90572adfe5e5588227c6">LogDestination::hostname</a>()</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                       &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;Log line format: [IWEF]mmdd hh:mm:ss.uuuuuu &quot;</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;threadid file:line] msg&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; file_header_string = file_header_stream.str();</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> header_len = file_header_string.size();</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    fwrite(file_header_string.data(), 1, header_len, file_);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    file_length_ += header_len;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    bytes_since_flush_ += header_len;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// Write to LOG file</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">stop_writing</a>) {</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="comment">// fwrite() doesn&#39;t return an error when the disk is full, for</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="comment">// messages that are less than 4096 bytes. When the disk is full,</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="comment">// it returns the message length for messages that are less than</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="comment">// 4096 bytes. fwrite() returns 4096 for message lengths that are</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="comment">// greater than 4096, thereby indicating an error.</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    errno = 0;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    fwrite(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, 1, message_len, file_);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_stop_logging_if_full_disk) &amp;&amp;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        errno == ENOSPC) {  <span class="comment">// disk full, stop writing to disk</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <a class="code" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">stop_writing</a> = <span class="keyword">true</span>;  <span class="comment">// until the disk is</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      file_length_ += message_len;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      bytes_since_flush_ += message_len;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacegoogle_1_1logging__internal.html#af8454039845aad804abcbabf98b68b23">logging_internal::CycleClock_Now</a>() &gt;= next_flush_time_)</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <a class="code" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">stop_writing</a> = <span class="keyword">false</span>;  <span class="comment">// check to see if disk has free space.</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">return</span>;                  <span class="comment">// no need to flush</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="comment">// See important msgs *now*.  Also, flush logs at least every 10^6 chars,</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">// or every &quot;absl::GetFlag(FLAGS_logbufsecs)&quot; seconds.</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">if</span> (force_flush || (bytes_since_flush_ &gt;= 1000000) ||</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      (<a class="code" href="namespacegoogle_1_1logging__internal.html#af8454039845aad804abcbabf98b68b23">logging_internal::CycleClock_Now</a>() &gt;= next_flush_time_)) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    FlushUnlocked();</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="preprocessor">#if defined(__linux__)</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="comment">// Only consider files &gt;= 3MiB</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_drop_log_memory) &amp;&amp; file_length_ &gt;= (3 &lt;&lt; 20)) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      <span class="comment">// Don&#39;t evict the most recent 1-2MiB so as not to impact a tailer</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="comment">// of the log file and to avoid page rounding issue on linux &lt; 4.7</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      uint32_t total_drop_length =</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;          (file_length_ &amp; ~((1 &lt;&lt; 20) - 1)) - (1 &lt;&lt; 20);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      uint32_t this_drop_length = total_drop_length - dropped_mem_length_;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">if</span> (this_drop_length &gt;= (2 &lt;&lt; 20)) {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="comment">// Only advise when &gt;= 2MiB to drop</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        posix_fadvise(fileno(file_), dropped_mem_length_, this_drop_length,</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                      POSIX_FADV_DONTNEED);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        dropped_mem_length_ = total_drop_length;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;}  <span class="comment">// namespace</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">// Static log data space to avoid alloc failures in a LOG(FATAL)</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">// Since multiple threads may call LOG(FATAL), and we want to preserve</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment">// the data from the first call, we allocate two sets of space.  One</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">// for exclusive use by the first thread, and one for shared use by</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">// all other threads.</span></div><div class="line"><a name="l01048"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a407c4496d81fae1029e8800dd42ac68e"> 1048</a></span>&#160;<span class="keyword">static</span> absl::Mutex <a class="code" href="namespacegoogle.html#a407c4496d81fae1029e8800dd42ac68e">fatal_msg_lock</a>;</div><div class="line"><a name="l01049"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447"> 1049</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structgoogle_1_1logging__internal_1_1_crash_reason.html">logging_internal::CrashReason</a> <a class="code" href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447">crash_reason</a>;</div><div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c"> 1050</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c">fatal_msg_exclusive</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee"> 1051</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a> <a class="code" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>;</div><div class="line"><a name="l01052"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a861f0c066ef30bb3d7b4e442f55f93af"> 1052</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a> <a class="code" href="namespacegoogle.html#a861f0c066ef30bb3d7b4e442f55f93af">fatal_msg_data_shared</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">// Static thread-local log data space to use, because typically at most one</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">// LogMessageData object exists (in this case glog makes zero heap memory</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">// allocations).</span></div><div class="line"><a name="l01057"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e"> 1057</a></span>&#160;<span class="keyword">static</span> thread_local <span class="keywordtype">bool</span> <a class="code" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">thread_data_available</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="keyword">static</span> thread_local std::aligned_storage&lt;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keyword">sizeof</span>(<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a>),</div><div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a931d134061563f4e07e764641989db9b"> 1061</a></span>&#160;    <span class="keyword">alignof</span>(<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a>)&gt;::type <a class="code" href="namespacegoogle.html#a931d134061563f4e07e764641989db9b">thread_msg_data</a>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aefae0ad3d1d866302a3d246ad4f03a32"> 1063</a></span>&#160;LogMessage::LogMessageData::LogMessageData()</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    : stream_(message_text_, <a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>::kMaxLogMessageLen, 0) {}</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9"> 1066</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                       <span class="keywordtype">int</span> ctr, <span class="keywordtype">void</span> (<a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>::*send_method)())</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    : allocated_(NULL) {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  Init(<a class="code" href="namespacefile.html">file</a>, line, severity, send_method);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>.<a class="code" href="classgoogle_1_1_log_message_1_1_log_stream.html#ae8ceb65aeef61f5cebbd0e2860c6d7c3">set_ctr</a>(ctr);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#ab85cea631fe5f3e262f734effd8162f4"> 1073</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <span class="keyword">const</span> <a class="code" href="structgoogle_1_1_check_op_string.html">CheckOpString</a>&amp; result)</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    : allocated_(NULL) {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  Init(<a class="code" href="namespacefile.html">file</a>, line, <a class="code" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a>, &amp;<a class="code" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">LogMessage::SendToLog</a>);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>() &lt;&lt; <span class="stringliteral">&quot;Check failed: &quot;</span> &lt;&lt; (*result.<a class="code" href="structgoogle_1_1_check_op_string.html#a3e35a685fcaa15d88c35fa93cd3126c5">str_</a>) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;}</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a9f1110a2f9d0647c96f40cff7f3780b1"> 1079</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line) : allocated_(NULL) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  Init(<a class="code" href="namespacefile.html">file</a>, line, <a class="code" href="namespacegoogle.html#af3c2db675e75f2074724f754d3cf7885">GLOG_INFO</a>, &amp;<a class="code" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">LogMessage::SendToLog</a>);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;}</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aa95821444a689129b39182932f086fb7"> 1083</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity)</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    : allocated_(NULL) {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  Init(<a class="code" href="namespacefile.html">file</a>, line, severity, &amp;<a class="code" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">LogMessage::SendToLog</a>);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;}</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aeb89e818ca89c4e8f5dc8e6093ff9dce"> 1088</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                       <a class="code" href="classgoogle_1_1_log_sink.html">LogSink</a>* sink, <span class="keywordtype">bool</span> also_send_to_log)</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    : allocated_(NULL) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  Init(<a class="code" href="namespacefile.html">file</a>, line, severity,</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;       also_send_to_log ? &amp;LogMessage::SendToSinkAndLog</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                        : &amp;LogMessage::SendToSink);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a> = sink;  <span class="comment">// override Init()&#39;s setting to NULL</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;}</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a78af5308ef44609a86cd691aaa97323a"> 1097</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                       vector&lt;string&gt;* outvec)</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    : allocated_(NULL) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  Init(<a class="code" href="namespacefile.html">file</a>, line, severity, &amp;LogMessage::SaveOrSendToLog);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a> = outvec;  <span class="comment">// override Init()&#39;s setting to NULL</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;}</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aeb194c56379cf77f547155b1f16064d4"> 1104</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                       <span class="keywordtype">string</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>)</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    : allocated_(NULL) {</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  Init(<a class="code" href="namespacefile.html">file</a>, line, severity, &amp;LogMessage::WriteToStringAndLog);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">message_</a> = <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>;  <span class="comment">// override Init()&#39;s setting to NULL</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;}</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="keywordtype">void</span> LogMessage::Init(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                      <span class="keywordtype">void</span> (<a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>::*send_method)()) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  allocated_ = NULL;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="keywordflow">if</span> (severity != <a class="code" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a> || !<a class="code" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a>) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">// No need for locking, because this is thread local.</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">thread_data_available</a>) {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <a class="code" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">thread_data_available</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      data_ = <span class="keyword">new</span> (&amp;<a class="code" href="namespacegoogle.html#a931d134061563f4e07e764641989db9b">thread_msg_data</a>) LogMessageData;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      allocated_ = <span class="keyword">new</span> LogMessageData();</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      data_ = allocated_;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    }</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a407c4496d81fae1029e8800dd42ac68e">fatal_msg_lock</a>);</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c">fatal_msg_exclusive</a>) {</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      <a class="code" href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c">fatal_msg_exclusive</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      data_ = &amp;<a class="code" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      data_ = &amp;<a class="code" href="namespacegoogle.html#a861f0c066ef30bb3d7b4e442f55f93af">fatal_msg_data_shared</a>;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    }</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>().fill(<span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a> = errno;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a> = severity;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a> = line;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">send_method_</a> = send_method;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a> = NULL;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a> = NULL;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  timespec now_ts = absl::ToTimespec(absl::Now());</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a> = now_ts.tv_sec;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  localtime_r(&amp;data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a>, &amp;data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="keywordtype">int</span> usecs = now_ts.tv_nsec / 1000;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> = 0;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">num_chars_to_syslog_</a> = 0;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a> = <a class="code" href="namespacegoogle_1_1logging__internal.html#af7c52c82f4832b6bfabe0c86a0c19d2e">logging_internal::const_basename</a>(<a class="code" href="namespacefile.html">file</a>);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a> = <a class="code" href="namespacefile.html">file</a>;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">has_been_flushed_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <span class="comment">// If specified, prepend a prefix to each line.  For example:</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">//    I1018 160715 f5d4fbb0 logging.cc:1153]</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="comment">//    (log level, GMT month, date, time, thread_id, file basename, line)</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// We exclude the thread_id for the default thread.</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_log_prefix) &amp;&amp; (line != <a class="code" href="classgoogle_1_1_log_message.html#abc6126af1d45847bc59afa0aa3216b04af8756cb52a8aac6329e43782e08f69e5">kNoLogPrefix</a>)) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>() &lt;&lt; <a class="code" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity][0] &lt;&lt; setw(2)</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;             &lt;&lt; 1 + data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>.tm_mon &lt;&lt; setw(2) &lt;&lt; data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>.tm_mday</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;             &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; setw(2) &lt;&lt; data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>.tm_hour &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2)</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;             &lt;&lt; data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>.tm_min &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2)</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;             &lt;&lt; data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>.tm_sec &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; setw(6) &lt;&lt; usecs &lt;&lt; <span class="charliteral">&#39; &#39;</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;             &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; setw(5) &lt;&lt; <a class="code" href="namespacegoogle_1_1logging__internal.html#aa5bcfef09a25e887a41b29f9ba9be836">logging_internal::GetTID</a>()</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;             &lt;&lt; setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a> &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;] &quot;</span>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  }</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>.<a class="code" href="classgoogle_1_1_log_message_1_1_log_stream.html#a2752f4361bbc1b5a3158ebaf821d97b4">pcount</a>();</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_log_backtrace_at).empty()) {</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordtype">char</span> fileline[128];</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    snprintf(fileline, <span class="keyword">sizeof</span>(fileline), <span class="stringliteral">&quot;%s:%d&quot;</span>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>, line);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">if</span> (!strcmp(absl::GetFlag(FLAGS_log_backtrace_at).c_str(), fileline)) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordtype">string</span> stacktrace;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <a class="code" href="namespacegoogle_1_1logging__internal.html#a07cf4471662221986927d079727609d8">logging_internal::DumpStackTraceToString</a>(&amp;stacktrace);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      <a class="code" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>() &lt;&lt; <span class="stringliteral">&quot; (stacktrace:\n&quot;</span> &lt;&lt; stacktrace &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    }</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;}</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aeeabea83ed8b4e356d4d36ece0fcb1bf"> 1181</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message.html#aeeabea83ed8b4e356d4d36ece0fcb1bf">LogMessage::~LogMessage</a>() {</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31">Flush</a>();</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="preprocessor">#ifdef GLOG_THREAD_LOCAL_STORAGE</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <span class="keywordflow">if</span> (data_ == static_cast&lt;void*&gt;(&amp;<a class="code" href="namespacegoogle.html#a931d134061563f4e07e764641989db9b">thread_msg_data</a>)) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    data_-&gt;~LogMessageData();</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">thread_data_available</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keyword">delete</span> allocated_;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="preprocessor">#else   // !defined(GLOG_THREAD_LOCAL_STORAGE)</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keyword">delete</span> allocated_;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="preprocessor">#endif  // defined(GLOG_THREAD_LOCAL_STORAGE)</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;}</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div><div class="line"><a name="l01195"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77"> 1195</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77">LogMessage::preserved_errno</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a>; }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c"> 1197</a></span>&#160;ostream&amp; <a class="code" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">LogMessage::stream</a>() { <span class="keywordflow">return</span> data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>; }</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">// Flush buffered message, called by the destructor, or any other function</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">// that needs to synchronize the log.</span></div><div class="line"><a name="l01201"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31"> 1201</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31">LogMessage::Flush</a>() {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keywordflow">if</span> (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">has_been_flushed_</a> ||</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a> &lt; absl::GetFlag(FLAGS_minloglevel))</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>.<a class="code" href="classgoogle_1_1_log_message_1_1_log_stream.html#a2752f4361bbc1b5a3158ebaf821d97b4">pcount</a>();</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">num_chars_to_syslog_</a> =</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">// Do we need to add a \n to the end of this message?</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="keywordtype">bool</span> append_newline =</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] != <span class="charliteral">&#39;\n&#39;</span>);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordtype">char</span> original_final_char = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// If we do need to add a \n, we&#39;ll do it by violating the memory of the</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// ostrstream buffer.  This is quick, and we&#39;ll make sure to undo our</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// modification before anything else is done with the ostrstream.  It</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <span class="comment">// would be preferable not to do things this way, but it seems to be</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="comment">// the best way to deal with this.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">if</span> (append_newline) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    original_final_char = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>];</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>++] = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <span class="comment">// the actual logging action per se.</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  {</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    (this-&gt;*(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">send_method_</a>))();</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    ++num_messages_[static_cast&lt;int&gt;(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>)];</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  LogDestination::WaitForSinks(data_);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="keywordflow">if</span> (append_newline) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">// Fix the ostrstream back how it was before we screwed with it.</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="comment">// It&#39;s 99.44% certain that we don&#39;t need to worry about doing this.</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] = original_final_char;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <span class="comment">// If errno was already set before we enter the logging call, we&#39;ll</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="comment">// set it back to that value when we return from the logging call.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="comment">// It happens often that we log an error message after a syscall</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="comment">// failure, which can potentially set the errno to some other</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="comment">// values.  We would like to preserve the original errno.</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordflow">if</span> (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a> != 0) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    errno = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">// Note that this message is now safely logged.  If we&#39;re asked to flush</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="comment">// again, as a result of destruction, say, we&#39;ll do nothing on future calls.</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">has_been_flushed_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;}</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">// Copy of first FATAL log message so that we can print it out again</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment">// after all the stack traces.  To preserve legacy behavior, we don&#39;t</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">// use fatal_msg_data_exclusive.</span></div><div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf"> 1257</a></span>&#160;<span class="keyword">static</span> time_t <a class="code" href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf">fatal_time</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02"> 1258</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>[256];</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"><a class="line" href="namespacegoogle.html#afe9db80601fc823372a09c832a802529"> 1260</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#afe9db80601fc823372a09c832a802529">ReprintFatalMessage</a>() {</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>[0]) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> n = strlen(<a class="code" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_logtostderr)) {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="comment">// Also write to stderr (don&#39;t color to avoid terminal checks)</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <a class="code" href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">WriteToStderr</a>(<a class="code" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>, n);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    LogDestination::LogToAllLogfiles(<a class="code" href="namespacegoogle.html#aec61ff6c741224bbf1d230d40449aa30">GLOG_ERROR</a>, <a class="code" href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf">fatal_time</a>, <a class="code" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>, n);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;}</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div><div class="line"><a name="l01272"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6"> 1272</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">LogMessage::SendToLog</a>() EXCLUSIVE_LOCKS_REQUIRED(<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> already_warned_before_initgoogle = <span class="keyword">false</span>;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>.AssertHeld();</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <a class="code" href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a>(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> &gt; 0 &amp;&amp;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                 data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] == <span class="charliteral">&#39;\n&#39;</span>,</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;             <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="comment">// Messages of a given severity get logged to lower severity logs, too</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keywordflow">if</span> (!already_warned_before_initgoogle &amp;&amp;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      !<a class="code" href="namespacegoogle_1_1logging__internal.html#aa3792ddc75755350b76a7b196369eda3">logging_internal::IsGoogleLoggingInitialized</a>()) {</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> w[] =</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <span class="stringliteral">&quot;WARNING: Logging before InitGoogleLogging() is &quot;</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="stringliteral">&quot;written to STDERR\n&quot;</span>;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <a class="code" href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">WriteToStderr</a>(w, strlen(w));</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    already_warned_before_initgoogle = <span class="keyword">true</span>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="comment">// global flag: never log to file if set.  Also -- don&#39;t log to a</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="comment">// file if we haven&#39;t parsed the command line flags to get the</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">// program name.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_logtostderr) ||</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      !<a class="code" href="namespacegoogle_1_1logging__internal.html#aa3792ddc75755350b76a7b196369eda3">logging_internal::IsGoogleLoggingInitialized</a>()) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <a class="code" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">ColoredWriteToStderr</a>(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>,</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                         data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="comment">// this could be protected by a flag if necessary.</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    LogDestination::LogToSinks(</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>,</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        &amp;data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>,</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1));</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="comment">// log this message to all log files of severity &lt;= severity_</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    LogDestination::LogToAllLogfiles(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a>,</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                                     data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>,</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                                     data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    LogDestination::MaybeLogToStderr(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>,</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                                     data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    LogDestination::LogToSinks(</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>,</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        &amp;data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>,</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1));</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="comment">// NOTE: -1 removes trailing \n</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  }</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// If we log a FATAL message, flush all the log destinations, then toss</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <span class="comment">// a signal for others to catch. We leave the logs in a state that</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="comment">// someone else can use them (as long as they flush afterwards)</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">if</span> (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a> == <a class="code" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a> &amp;&amp; <a class="code" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a>) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordflow">if</span> (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a>) {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <span class="comment">// Store crash information so that it is accessible from within signal</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="comment">// handlers that may be invoked later.</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      RecordCrashReason(&amp;<a class="code" href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447">crash_reason</a>);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <a class="code" href="namespacegoogle_1_1logging__internal.html#a88dfce8ed7ee385f0238de1387ea7845">SetCrashReason</a>(&amp;<a class="code" href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447">crash_reason</a>);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="comment">// Store shortened fatal message for other logs and GWQ status</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> copy =</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;          min&lt;int&gt;(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>, <span class="keyword">sizeof</span>(<a class="code" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>) - 1);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      memcpy(<a class="code" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>, copy);</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      <a class="code" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>[copy] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <a class="code" href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf">fatal_time</a> = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a>;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    }</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_logtostderr)) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; ++i) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">if</span> (LogDestination::log_destinations_[i])</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;          LogDestination::log_destinations_[i]-&gt;logger_-&gt;Write(<span class="keyword">true</span>, 0, <span class="stringliteral">&quot;&quot;</span>, 0);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="comment">// release the lock that our caller (directly or indirectly)</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="comment">// LogMessage::~LogMessage() grabbed so that signal handlers</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="comment">// can use the logging facility. Alternately, we could add</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="comment">// an entire unsafe logging interface to bypass locking</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    <span class="comment">// for signal handlers but this seems simpler.</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>.Unlock();</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    LogDestination::WaitForSinks(data_);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a> = <span class="stringliteral">&quot;*** Check failure stack trace: ***\n&quot;</span>;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (write(STDERR_FILENO, <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, strlen(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>)) &lt; 0) {</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      <span class="comment">// Ignore errors.</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    }</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795">Fail</a>();</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;}</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="keywordtype">void</span> LogMessage::RecordCrashReason(<a class="code" href="structgoogle_1_1logging__internal_1_1_crash_reason.html">logging_internal::CrashReason</a>* reason) {</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  reason-&gt;<a class="code" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a> = <a class="code" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>.<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  reason-&gt;<a class="code" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#ada7b81cc6d5bbe25b92c0162697e0f58">line_number</a> = <a class="code" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>.<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  reason-&gt;<a class="code" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a254bf0858da09c96a48daf64404eb4f8">message</a> = <a class="code" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>.<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> +</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                    <a class="code" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>.<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <span class="comment">// Retrieve the stack trace, omitting the logging frames that got us here.</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  reason-&gt;<a class="code" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#acb5ba97551079e0b072c62c21d784ac5">depth</a> =</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      absl::GetStackTrace(reason-&gt;<a class="code" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a155108dfb07b71f192a35ce75199ed33">stack</a>, ABSL_ARRAYSIZE(reason-&gt;<a class="code" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a155108dfb07b71f192a35ce75199ed33">stack</a>), 4);</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;}</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="preprocessor">#if !defined(_MSC_VER)</span></div><div class="line"><a name="l01372"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#afaad0abfed30e8ee5ae7d27b5ecea29f"> 1372</a></span>&#160;<span class="preprocessor">#define ATTRIBUTE_NORETURN __attribute__((noreturn))</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="preprocessor">#define ATTRIBUTE_NORETURN</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="preprocessor">#if defined(_MSC_VER)</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;__declspec(noreturn)</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d">logging_fail</a>() <a class="code" href="base_2logging_8cc.html#afaad0abfed30e8ee5ae7d27b5ecea29f">ATTRIBUTE_NORETURN</a>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d"> 1382</a></span>&#160;static <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d">logging_fail</a>() { abort(); }</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6"> 1384</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6">logging_fail_func_t</a>)() <a class="code" href="base_2logging_8cc.html#afaad0abfed30e8ee5ae7d27b5ecea29f">ATTRIBUTE_NORETURN</a>;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<a class="code" href="logging__export_8h.html#a980c97856a47502c2877b93460f44f87">GOOGLE_GLOG_DLL_DECL</a></div><div class="line"><a name="l01387"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf"> 1387</a></span>&#160;<a class="code" href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6">logging_fail_func_t</a> <a class="code" href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf">g_logging_fail_func</a> = &amp;<a class="code" href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d">logging_fail</a>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a80d0d63d8be7a9721961916a9ab9a9c3"> 1389</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a80d0d63d8be7a9721961916a9ab9a9c3">InstallFailureFunction</a>(<span class="keywordtype">void</span> (*fail_func)()) {</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <a class="code" href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf">g_logging_fail_func</a> = (<a class="code" href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6">logging_fail_func_t</a>)fail_func;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;}</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795"> 1393</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795">LogMessage::Fail</a>() { <a class="code" href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf">g_logging_fail_func</a>(); }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="keywordtype">void</span> LogMessage::SendToSink() EXCLUSIVE_LOCKS_REQUIRED(<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="keywordflow">if</span> (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a> != NULL) {</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a>(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> &gt; 0 &amp;&amp;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                   data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] == <span class="charliteral">&#39;\n&#39;</span>,</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;               <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a>-&gt;<a class="code" href="classgoogle_1_1_log_sink.html#a0e3384308bca57a6a44f3c2b5258ffb1">send</a>(</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>,</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        &amp;data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">tm_time_</a>, data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>,</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1));</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  }</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;}</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="keywordtype">void</span> LogMessage::SendToSinkAndLog() EXCLUSIVE_LOCKS_REQUIRED(<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  SendToSink();</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">SendToLog</a>();</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;}</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<span class="keywordtype">void</span> LogMessage::SaveOrSendToLog() EXCLUSIVE_LOCKS_REQUIRED(<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="keywordflow">if</span> (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a> != NULL) {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <a class="code" href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a>(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> &gt; 0 &amp;&amp;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                   data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] == <span class="charliteral">&#39;\n&#39;</span>,</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;               <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="comment">// Omit prefix of message and trailing newline when recording in outvec_.</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* start = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordtype">int</span> len = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a>-&gt;push_back(<span class="keywordtype">string</span>(start, len));</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <a class="code" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">SendToLog</a>();</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  }</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;}</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="keywordtype">void</span> LogMessage::WriteToStringAndLog() EXCLUSIVE_LOCKS_REQUIRED(<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keywordflow">if</span> (data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">message_</a> != NULL) {</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a>(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> &gt; 0 &amp;&amp;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                   data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] == <span class="charliteral">&#39;\n&#39;</span>,</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;               <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="comment">// Omit prefix of message and trailing newline when writing to message_.</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* start = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordtype">int</span> len = data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">message_</a>-&gt;assign(start, len);</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;  }</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">SendToLog</a>();</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div><div class="line"><a name="l01443"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a3ea77f17c72e61d4ca8b21433e629d43"> 1443</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_message.html#a3ea77f17c72e61d4ca8b21433e629d43">LogMessage::SendToSyslogAndLog</a>() {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;<span class="preprocessor">#if !defined(_MSC_VER)</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <span class="comment">// Before any calls to syslog(), make a single call to openlog()</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> openlog_already_called = <span class="keyword">false</span>;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="keywordflow">if</span> (!openlog_already_called) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    openlog(<a class="code" href="namespacegoogle_1_1logging__internal.html#a43adca49683a5766aecb000c340e988c">logging_internal::ProgramInvocationShortName</a>(),</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            LOG_CONS | LOG_NDELAY | LOG_PID, LOG_USER);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    openlog_already_called = <span class="keyword">true</span>;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  }</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <span class="comment">// This array maps Google severity levels to syslog levels</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> SEVERITY_TO_LEVEL[] = {LOG_INFO, LOG_WARNING, LOG_ERR, LOG_EMERG};</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  syslog(LOG_USER | SEVERITY_TO_LEVEL[static_cast&lt;int&gt;(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>)],</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;         <span class="stringliteral">&quot;%.*s&quot;</span>, static_cast&lt;int&gt;(data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">num_chars_to_syslog_</a>),</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;         data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">SendToLog</a>();</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <a class="code" href="base_2logging_8h.html#accad43a85d781d53381cd53a9894b6ae">LOG</a>(<a class="code" href="log__severity_8h.html#ac9bcbe19995a8140cd4ec61773cd6e67">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;No syslog support: message=&quot;</span> &lt;&lt; data_-&gt;<a class="code" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;}</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base.html#a50d33a682377552803e3bda0568358ad"> 1464</a></span>&#160;<a class="code" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a>* <a class="code" href="namespacegoogle_1_1base.html#a50d33a682377552803e3bda0568358ad">base::GetLogger</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity) {</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="keywordflow">return</span> LogDestination::log_destination(severity)-&gt;logger_;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;}</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base.html#a754a333359f5c02714711bb4e01417b0"> 1469</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle_1_1base.html#a754a333359f5c02714711bb4e01417b0">base::SetLogger</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <a class="code" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a>* logger) {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  LogDestination::log_destination(severity)-&gt;logger_ = logger;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;}</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">// L &lt; log_mutex.  Acquires and releases absl::Mutex_.</span></div><div class="line"><a name="l01475"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a8505d7c85d1ca04684141bb1b8113770"> 1475</a></span>&#160;int64_t <a class="code" href="classgoogle_1_1_log_message.html#a8505d7c85d1ca04684141bb1b8113770">LogMessage::num_messages</a>(<span class="keywordtype">int</span> severity) {</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="keywordflow">return</span> num_messages_[severity];</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;}</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">// Output the COUNTER value. This is only valid if ostream is a</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment">// LogStream.</span></div><div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a001f0868c92c66aa4991da10384c5304"> 1482</a></span>&#160;ostream&amp; <a class="code" href="namespacegoogle.html#a001f0868c92c66aa4991da10384c5304">operator&lt;&lt;</a>(ostream&amp; os, <span class="keyword">const</span> <a class="code" href="namespacegoogle.html#aa739a176bcc5230a3536ef27a860c1a8">PRIVATE_Counter</a>&amp;) {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="preprocessor">#ifdef DISABLE_RTTI</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="classgoogle_1_1_log_message_1_1_log_stream.html">LogMessage::LogStream</a>* log = static_cast&lt;LogMessage::LogStream*&gt;(&amp;os);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <a class="code" href="classgoogle_1_1_log_message_1_1_log_stream.html">LogMessage::LogStream</a>* log = dynamic_cast&lt;LogMessage::LogStream*&gt;(&amp;os);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <a class="code" href="base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(log &amp;&amp; log == log-&gt;<a class="code" href="classgoogle_1_1_log_message_1_1_log_stream.html#afba3807a4b1ff505547b010b84e50cce">self</a>())</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;You must not use COUNTER with non-glog ostream&quot;</span>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  os &lt;&lt; log-&gt;<a class="code" href="classgoogle_1_1_log_message_1_1_log_stream.html#a73e0d9048f393bf907a3f69033ab8a7f">ctr</a>();</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="keywordflow">return</span> os;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="classgoogle_1_1_errno_log_message.html#a642ae9bfe25d95030fe6c7b0aa89b4a4"> 1494</a></span>&#160;<a class="code" href="classgoogle_1_1_errno_log_message.html#a642ae9bfe25d95030fe6c7b0aa89b4a4">ErrnoLogMessage::ErrnoLogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line,</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                                 <a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keywordtype">int</span> ctr,</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                                 <span class="keywordtype">void</span> (<a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>::*send_method)())</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    : <a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>(<a class="code" href="namespacefile.html">file</a>, line, severity, ctr, send_method) {}</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"><a class="line" href="classgoogle_1_1_errno_log_message.html#acd60ba4091f3d6c1a17f9142b29db3da"> 1499</a></span>&#160;<a class="code" href="classgoogle_1_1_errno_log_message.html#acd60ba4091f3d6c1a17f9142b29db3da">ErrnoLogMessage::~ErrnoLogMessage</a>() {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <span class="comment">// Don&#39;t access errno directly because it may have been altered</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">// while streaming the message.</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code" href="namespacegoogle.html#a8688e486af1a034920af845ceba0952f">StrError</a>(<a class="code" href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77">preserved_errno</a>()) &lt;&lt; <span class="stringliteral">&quot; [&quot;</span> &lt;&lt; <a class="code" href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77">preserved_errno</a>()</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;}</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ad0cffd6498cbf357c5f3c1b7c3683c84"> 1506</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#ad0cffd6498cbf357c5f3c1b7c3683c84">FlushLogFiles</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity) {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#ae0bab6f35a5369aef2554e5569fffea6">LogDestination::FlushLogFiles</a>(min_severity);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;}</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a27fd092cfd7530a45451a8e0b0fcdf8e"> 1510</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a27fd092cfd7530a45451a8e0b0fcdf8e">FlushLogFilesUnsafe</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity) {</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#a1bc1ccffe41da1564b1bec29b08fc4e1">LogDestination::FlushLogFilesUnsafe</a>(min_severity);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;}</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a52b012381ca169c60f696aeeb54a9d77"> 1514</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a52b012381ca169c60f696aeeb54a9d77">SetLogDestination</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename) {</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">LogDestination::SetLogDestination</a>(severity, base_filename);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;}</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a9800270f9c517ac3c4f1a69d2d79d1ff"> 1518</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a9800270f9c517ac3c4f1a69d2d79d1ff">SetLogSymlink</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename) {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#a67f05b74958c4c9f2a0b39df9581bf1c">LogDestination::SetLogSymlink</a>(severity, symlink_basename);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;}</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_sink.html#a579e2c28338fc8411ddfb3789f3b901d"> 1522</a></span>&#160;<a class="code" href="classgoogle_1_1_log_sink.html#a579e2c28338fc8411ddfb3789f3b901d">LogSink::~LogSink</a>() {}</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_sink.html#a96a54d485a8e3745eabd2859e6c3bb0a"> 1524</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classgoogle_1_1_log_sink.html#a96a54d485a8e3745eabd2859e6c3bb0a">LogSink::WaitTillSent</a>() {</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <span class="comment">// noop default</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;}</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div><div class="line"><a name="l01528"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_sink.html#a68c6c88e8a64d08d3c070bd014ce7172"> 1528</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="classgoogle_1_1_log_sink.html#a68c6c88e8a64d08d3c070bd014ce7172">LogSink::ToString</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line,</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                         <span class="keyword">const</span> struct ::tm* tm_time, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                         <span class="keywordtype">size_t</span> message_len) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  ostringstream stream(<span class="keywordtype">string</span>(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, message_len));</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  stream.fill(<span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <span class="comment">// FIXME(jrvb): Updating this to use the correct value for usecs</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  <span class="comment">// requires changing the signature for both this method and</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="comment">// LogSink::send().  This change needs to be done in a separate CL</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="comment">// so subclasses of LogSink can be updated at the same time.</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;  <span class="keywordtype">int</span> usecs = 0;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  stream &lt;&lt; <a class="code" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity][0] &lt;&lt; setw(2) &lt;&lt; 1 + tm_time-&gt;tm_mon</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;         &lt;&lt; setw(2) &lt;&lt; tm_time-&gt;tm_mday &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; setw(2) &lt;&lt; tm_time-&gt;tm_hour</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;         &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2) &lt;&lt; tm_time-&gt;tm_min &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2)</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;         &lt;&lt; tm_time-&gt;tm_sec &lt;&lt; <span class="charliteral">&#39;.&#39;</span> &lt;&lt; setw(6) &lt;&lt; usecs &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>)</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;         &lt;&lt; setw(5) &lt;&lt; <a class="code" href="namespacegoogle_1_1logging__internal.html#aa5bcfef09a25e887a41b29f9ba9be836">logging_internal::GetTID</a>() &lt;&lt; setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code" href="namespacefile.html">file</a></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;         &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; line &lt;&lt; <span class="stringliteral">&quot;] &quot;</span>;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  stream &lt;&lt; string(<a class="code" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, message_len);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">return</span> stream.str();</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;}</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aac637fad473b5677c3f94fb8372257b0"> 1551</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#aac637fad473b5677c3f94fb8372257b0">AddLogSink</a>(<a class="code" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#a043cd6b97be276f99eea8f0ea3ece475">LogDestination::AddLogSink</a>(destination);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;}</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div><div class="line"><a name="l01555"></a><span class="lineno"><a class="line" href="namespacegoogle.html#afb08de7bff9aaa916db76a47bcd9077a"> 1555</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#afb08de7bff9aaa916db76a47bcd9077a">RemoveLogSink</a>(<a class="code" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination) {</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#a141a4160dcfa07d47161821c7e143236">LogDestination::RemoveLogSink</a>(destination);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;}</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a45f04ff1beb3af3882c99d3b63616dde"> 1559</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a45f04ff1beb3af3882c99d3b63616dde">SetLogFilenameExtension</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* ext) {</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#a799e2628a1c44ccc1c3017ece67f41e7">LogDestination::SetLogFilenameExtension</a>(ext);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;}</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a57ac69eb66761ee6406d5e4a3f33ff87"> 1563</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a57ac69eb66761ee6406d5e4a3f33ff87">SetStderrLogging</a>(<a class="code" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity) {</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">LogDestination::SetStderrLogging</a>(min_severity);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;}</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ab90a343a65dff8ffc12a5133fd8dcbaf"> 1567</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#ab90a343a65dff8ffc12a5133fd8dcbaf">LogToStderr</a>() { <a class="code" href="classgoogle_1_1_log_destination.html#a7d7631cb9c19962577211ac1a7a85c58">LogDestination::LogToStderr</a>(); }</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base.html"> 1569</a></span>&#160;<span class="keyword">namespace </span>base {</div><div class="line"><a name="l01570"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base_1_1internal.html"> 1570</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceinternal.html">internal</a> {</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacegoogle_1_1base_1_1internal.html#abad0e8912e4c1231b44d52109bf3c68f">GetExitOnDFatal</a>();</div><div class="line"><a name="l01573"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base_1_1internal.html#abad0e8912e4c1231b44d52109bf3c68f"> 1573</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacegoogle_1_1base_1_1internal.html#abad0e8912e4c1231b44d52109bf3c68f">GetExitOnDFatal</a>() {</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a>;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;}</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">// Determines whether we exit the program for a LOG(DFATAL) message in</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="comment">// debug mode.  It does this by skipping the call to Fail/FailQuietly.</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="comment">// This is intended for testing only.</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="comment">// This can have some effects on LOG(FATAL) as well.  Failure messages</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="comment">// are always allocated (rather than sharing a buffer), the crash</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment">// reason is not recorded, the &quot;gwq&quot; status message is not updated,</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">// and the stack trace is not recorded.  The LOG(FATAL) *will* still</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment">// exit the program.  Since this function is used only in testing,</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment">// these differences are acceptable.</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle_1_1base_1_1internal.html#a794f86364cecaf6c630c587cc2ad002c">SetExitOnDFatal</a>(<span class="keywordtype">bool</span> <a class="code" href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>);</div><div class="line"><a name="l01589"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base_1_1internal.html#a794f86364cecaf6c630c587cc2ad002c"> 1589</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle_1_1base_1_1internal.html#a794f86364cecaf6c630c587cc2ad002c">SetExitOnDFatal</a>(<span class="keywordtype">bool</span> <a class="code" href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>) {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  absl::MutexLock l(&amp;<a class="code" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <a class="code" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a> = <a class="code" href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;}</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;}  <span class="comment">// namespace internal</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;}  <span class="comment">// namespace base</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment">// Shell-escaping as we need to shell out ot /bin/mail.</span></div><div class="line"><a name="l01598"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aa68b268a02d18e2965e36f4211777db6"> 1598</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="namespacegoogle.html#aa68b268a02d18e2965e36f4211777db6">kDontNeedShellEscapeChars</a>[] =</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="stringliteral">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="stringliteral">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="stringliteral">&quot;0123456789+-_.=/:,@&quot;</span>;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aa0499f87843a0da8d1615089b60ae4eb"> 1603</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code" href="namespacegoogle.html#aa0499f87843a0da8d1615089b60ae4eb">ShellEscape</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; src) {</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <span class="keywordtype">string</span> result;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="keywordflow">if</span> (!src.empty() &amp;&amp;  <span class="comment">// empty string needs quotes</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      src.find_first_not_of(<a class="code" href="namespacegoogle.html#aa68b268a02d18e2965e36f4211777db6">kDontNeedShellEscapeChars</a>) == string::npos) {</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="comment">// only contains chars that don&#39;t need quotes; it&#39;s fine</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    result.assign(src);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src.find_first_of(<span class="charliteral">&#39;\&#39;&#39;</span>) == string::npos) {</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="comment">// no single quotes; just wrap it in single quotes</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    result.assign(<span class="stringliteral">&quot;&#39;&quot;</span>);</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    result.append(src);</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    result.append(<span class="stringliteral">&quot;&#39;&quot;</span>);</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="comment">// needs double quote escaping</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    result.assign(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; src.size(); ++i) {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">switch</span> (src[i]) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;$&#39;</span>:</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;`&#39;</span>:</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;          result.append(<span class="stringliteral">&quot;\\&quot;</span>);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      }</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      result.append(src, i, 1);</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    result.append(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;}</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"><a class="line" href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905"> 1632</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905">GetTempDirectories</a>(vector&lt;string&gt;* list) {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  list-&gt;clear();</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="comment">// On windows we&#39;ll try to find a directory in this order:</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="comment">//   C:/Documents &amp; Settings/whomever/TEMP (or whatever GetTempPath() is)</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <span class="comment">//   C:/TMP/</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="comment">//   C:/TEMP/</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="comment">//   C:/WINDOWS/ or C:/WINNT/</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <span class="comment">//   .</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <span class="keywordtype">char</span> tmp[MAX_PATH];</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="keywordflow">if</span> (GetTempPathA(MAX_PATH, tmp)) list-&gt;push_back(tmp);</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  list-&gt;push_back(<span class="stringliteral">&quot;C:\\tmp\\&quot;</span>);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  list-&gt;push_back(<span class="stringliteral">&quot;C:\\temp\\&quot;</span>);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="comment">// Directories, in order of preference. If we find a dir that</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <span class="comment">// exists, we stop adding other less-preferred dirs</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* candidates[] = {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      <span class="comment">// Non-null only during unittest/regtest</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      getenv(<span class="stringliteral">&quot;TEST_TMPDIR&quot;</span>),</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="comment">// Explicitly-supplied temp dirs</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      getenv(<span class="stringliteral">&quot;TMPDIR&quot;</span>),</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      getenv(<span class="stringliteral">&quot;TMP&quot;</span>),</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="comment">// If all else fails</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <span class="stringliteral">&quot;/tmp&quot;</span>,</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  };</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; ABSL_ARRAYSIZE(candidates); i++) {</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* d = candidates[i];</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="keywordflow">if</span> (!d) <span class="keywordflow">continue</span>;  <span class="comment">// Empty env var</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="comment">// Make sure we don&#39;t surprise anyone who&#39;s expecting a &#39;/&#39;</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keywordtype">string</span> dstr = d;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">if</span> (dstr[dstr.size() - 1] != <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      dstr += <span class="stringliteral">&quot;/&quot;</span>;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    }</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    list-&gt;push_back(dstr);</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keyword">struct </span>stat statbuf;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">if</span> (!stat(d, &amp;statbuf) &amp;&amp; S_ISDIR(statbuf.st_mode)) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <span class="comment">// We found a dir that exists - we&#39;re done.</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    }</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;}</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae"> 1681</a></span>&#160;<span class="keyword">static</span> vector&lt;string&gt;* <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a9145952db85676dbaf27080ab7173b97"> 1683</a></span>&#160;<span class="keyword">const</span> vector&lt;string&gt;&amp; <a class="code" href="namespacegoogle.html#a9145952db85676dbaf27080ab7173b97">GetLoggingDirectories</a>() {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="comment">// Not strictly thread-safe but we&#39;re called early in InitGoogle().</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a> == NULL) {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a> = <span class="keyword">new</span> vector&lt;string&gt;;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_log_dir).empty()) {</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="comment">// A dir was specified, we should use it</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>-&gt;push_back(absl::GetFlag(FLAGS_log_dir).c_str());</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <a class="code" href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905">GetTempDirectories</a>(<a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      <span class="keywordtype">char</span> tmp[MAX_PATH];</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <span class="keywordflow">if</span> (GetWindowsDirectoryA(tmp, MAX_PATH))</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>-&gt;push_back(tmp);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>-&gt;push_back(<span class="stringliteral">&quot;.\\&quot;</span>);</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>-&gt;push_back(<span class="stringliteral">&quot;./&quot;</span>);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    }</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  }</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="keywordflow">return</span> *<a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;}</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ae0f8ace9dff19cd627f09dbfaa8aae1b"> 1706</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#ae0f8ace9dff19cd627f09dbfaa8aae1b">TestOnly_ClearLoggingDirectoriesList</a>() {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  fprintf(stderr,</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;          <span class="stringliteral">&quot;TestOnly_ClearLoggingDirectoriesList should only be &quot;</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;          <span class="stringliteral">&quot;called from test code.\n&quot;</span>);</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="keyword">delete</span> <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a> = NULL;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;}</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;</div><div class="line"><a name="l01714"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a63b37be54b6c05f2d1523081b4089c19"> 1714</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a63b37be54b6c05f2d1523081b4089c19">GetExistingTempDirectories</a>(vector&lt;string&gt;* list) {</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <a class="code" href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905">GetTempDirectories</a>(list);</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  vector&lt;string&gt;::iterator i_dir = list-&gt;begin();</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="keywordflow">while</span> (i_dir != list-&gt;end()) {</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="comment">// zero arg to access means test for existence; no constant</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="comment">// defined on windows</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="keywordflow">if</span> (access(i_dir-&gt;c_str(), 0)) {</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      i_dir = list-&gt;erase(i_dir);</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      ++i_dir;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    }</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  }</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;}</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment">// Helper functions for string comparisons.</span></div><div class="line"><a name="l01729"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b"> 1729</a></span>&#160;<span class="preprocessor">#define DEFINE_CHECK_STROP_IMPL(name, func, expected)                         \</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="preprocessor">  string* Check##func##expected##Impl(const char* s1, const char* s2,         \</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="preprocessor">                                      const char* names) {                    \</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="preprocessor">    bool equal = s1 == s2 || (s1 &amp;&amp; s2 &amp;&amp; !func(s1, s2));                     \</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;<span class="preprocessor">    if (equal == expected) {                                                  \</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="preprocessor">      return NULL;                                                            \</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<span class="preprocessor">    } else {                                                                  \</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="preprocessor">      ostringstream ss;                                                       \</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="preprocessor">      if (!s1) s1 = &quot;&quot;;                                                       \</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="preprocessor">      if (!s2) s2 = &quot;&quot;;                                                       \</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="preprocessor">      ss &lt;&lt; #name &quot; failed: &quot; &lt;&lt; names &lt;&lt; &quot; (&quot; &lt;&lt; s1 &lt;&lt; &quot; vs. &quot; &lt;&lt; s2 &lt;&lt; &quot;)&quot;; \</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="preprocessor">      return new string(ss.str());                                            \</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="preprocessor">    }                                                                         \</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;<a class="code" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a>(<a class="code" href="base_2logging_8h.html#ad16cc5f247382150f402b7c9365cb4e7">CHECK_STREQ</a>, strcmp, <span class="keyword">true</span>)</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<a class="code" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a>(<a class="code" href="base_2logging_8h.html#a3f16e4372f664c60d5dd95421a171a4b">CHECK_STRNE</a>, strcmp, false)</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;<a class="code" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a>(<a class="code" href="base_2logging_8h.html#a857e59ac16481af7fc86f54c774f84c9">CHECK_STRCASEEQ</a>, strcasecmp, true)</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;<a class="code" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a>(<a class="code" href="base_2logging_8h.html#ab8e59a3e48687f8db849d28901f0bac8">CHECK_STRCASENE</a>, strcasecmp, false)</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="preprocessor">#undef DEFINE_CHECK_STROP_IMPL</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div><div class="line"><a name="l01749"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a8c3a96b28a44e635d84d6fb2517b411b"> 1749</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="namespacegoogle.html#a8c3a96b28a44e635d84d6fb2517b411b">posix_strerror_r</a>(<span class="keywordtype">int</span> err, <span class="keywordtype">char</span>* buf, <span class="keywordtype">size_t</span> len) {</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  <span class="comment">// Sanity check input parameters</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <span class="keywordflow">if</span> (buf == NULL || len &lt;= 0) {</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    errno = EINVAL;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  }</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="comment">// Reset buf and errno, and try calling whatever version of strerror_r()</span></div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <span class="comment">// is implemented by glibc</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;  buf[0] = <span class="charliteral">&#39;\000&#39;</span>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="keywordtype">int</span> old_errno = errno;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  errno = 0;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="keywordtype">char</span>* rc = reinterpret_cast&lt;char*&gt;(strerror_r(err, buf, len));</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <span class="comment">// Both versions set errno on failure</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="keywordflow">if</span> (errno) {</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">// Should already be there, but better safe than sorry</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    buf[0] = <span class="charliteral">&#39;\000&#39;</span>;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  errno = old_errno;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="comment">// POSIX is vague about whether the string will be terminated, although</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="comment">// is indirectly implies that typically ERANGE will be returned, instead</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">// of truncating the string. This is different from the GNU implementation.</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="comment">// We play it safe by always terminating the string explicitly.</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  buf[len - 1] = <span class="charliteral">&#39;\000&#39;</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="comment">// If the function succeeded, we can use its exit code to determine the</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">// semantics implemented by glibc</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordflow">if</span> (!rc) {</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="comment">// GNU semantics detected</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;    <span class="keywordflow">if</span> (rc == buf) {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      buf[0] = <span class="charliteral">&#39;\000&#39;</span>;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="preprocessor">#if defined(OS_MACOSX) || defined(OS_FREEBSD) || defined(OS_OPENBSD)</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">if</span> (reinterpret_cast&lt;intptr_t&gt;(rc) &lt; sys_nerr) {</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <span class="comment">// This means an error on MacOSX or FreeBSD.</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      }</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      strncat(buf, rc, len - 1);</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  }</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;}</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div><div class="line"><a name="l01799"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a8688e486af1a034920af845ceba0952f"> 1799</a></span>&#160;<span class="keywordtype">string</span> <a class="code" href="namespacegoogle.html#a8688e486af1a034920af845ceba0952f">StrError</a>(<span class="keywordtype">int</span> err) {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="keywordtype">char</span> buf[100];</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="keywordtype">int</span> rc = <a class="code" href="namespacegoogle.html#a8c3a96b28a44e635d84d6fb2517b411b">posix_strerror_r</a>(err, buf, <span class="keyword">sizeof</span>(buf));</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="keywordflow">if</span> ((rc &lt; 0) || (buf[0] == <span class="charliteral">&#39;\000&#39;</span>)) {</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Error number %d&quot;</span>, err);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  }</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="keywordflow">return</span> buf;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;}</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;</div><div class="line"><a name="l01808"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message_fatal.html#a4a1f973130ae38c8c9799cd8af1f2873"> 1808</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message_fatal.html#a4a1f973130ae38c8c9799cd8af1f2873">LogMessageFatal::LogMessageFatal</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line)</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    : <a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>(<a class="code" href="namespacefile.html">file</a>, line, <a class="code" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a>) {}</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message_fatal.html#a245db1b5d0cfab33f699682a59539a00"> 1811</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message_fatal.html#a4a1f973130ae38c8c9799cd8af1f2873">LogMessageFatal::LogMessageFatal</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line,</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="structgoogle_1_1_check_op_string.html">CheckOpString</a>&amp; result)</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    : <a class="code" href="classgoogle_1_1_log_message.html">LogMessage</a>(<a class="code" href="namespacefile.html">file</a>, line, result) {}</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;</div><div class="line"><a name="l01815"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message_fatal.html#ac9c99773209b46c9f963028abea613e2"> 1815</a></span>&#160;<a class="code" href="classgoogle_1_1_log_message_fatal.html#ac9c99773209b46c9f963028abea613e2">LogMessageFatal::~LogMessageFatal</a>() {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31">Flush</a>();</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <a class="code" href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795">LogMessage::Fail</a>();</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;}</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="keyword">namespace </span>base {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;</div><div class="line"><a name="l01822"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_check_op_message_builder.html#a1333dd08e59ead3b1e40c82981c3f805"> 1822</a></span>&#160;<a class="code" href="classgoogle_1_1base_1_1_check_op_message_builder.html#a1333dd08e59ead3b1e40c82981c3f805">CheckOpMessageBuilder::CheckOpMessageBuilder</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* exprtext)</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    : stream_(new ostringstream) {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  *stream_ &lt;&lt; exprtext &lt;&lt; <span class="stringliteral">&quot; (&quot;</span>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;}</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div><div class="line"><a name="l01827"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_check_op_message_builder.html#aaa8346df261ac8c17bb4c36b84330f8c"> 1827</a></span>&#160;<a class="code" href="classgoogle_1_1base_1_1_check_op_message_builder.html#aaa8346df261ac8c17bb4c36b84330f8c">CheckOpMessageBuilder::~CheckOpMessageBuilder</a>() { <span class="keyword">delete</span> stream_; }</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div><div class="line"><a name="l01829"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_check_op_message_builder.html#ae33b6f12ae75f7312d6bfd59ba4e7509"> 1829</a></span>&#160;ostream* <a class="code" href="classgoogle_1_1base_1_1_check_op_message_builder.html#ae33b6f12ae75f7312d6bfd59ba4e7509">CheckOpMessageBuilder::ForVar2</a>() {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  *stream_ &lt;&lt; <span class="stringliteral">&quot; vs. &quot;</span>;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;  <span class="keywordflow">return</span> stream_;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;}</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_check_op_message_builder.html#a5722d0eb48c3be72479813d564dfebbc"> 1834</a></span>&#160;<span class="keywordtype">string</span>* <a class="code" href="classgoogle_1_1base_1_1_check_op_message_builder.html#a5722d0eb48c3be72479813d564dfebbc">CheckOpMessageBuilder::NewString</a>() {</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  *stream_ &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> string(stream_-&gt;str());</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;}</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;}  <span class="comment">// namespace base</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l01842"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a3cfec6d724f40e5989a0d6c93b3fc115"> 1842</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">MakeCheckOpValueString</a>(std::ostream* os, <span class="keyword">const</span> <span class="keywordtype">char</span>&amp; v) {</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="keywordflow">if</span> (v &gt;= 32 &amp;&amp; v &lt;= 126) {</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    (*os) &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    (*os) &lt;&lt; <span class="stringliteral">&quot;char value &quot;</span> &lt;&lt; (int16_t)v;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;}</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l01851"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a2e2984f11d87849a762ea048f738ad54"> 1851</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">MakeCheckOpValueString</a>(std::ostream* os, <span class="keyword">const</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span>&amp; v) {</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  <span class="keywordflow">if</span> (v &gt;= 32 &amp;&amp; v &lt;= 126) {</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    (*os) &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    (*os) &lt;&lt; <span class="stringliteral">&quot;signed char value &quot;</span> &lt;&lt; (int16_t)v;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;}</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l01860"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a0e50ee5b1a04febdb5327d6b1f49b6a8"> 1860</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">MakeCheckOpValueString</a>(std::ostream* os, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>&amp; v) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">if</span> (v &gt;= 32 &amp;&amp; v &lt;= 126) {</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    (*os) &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    (*os) &lt;&lt; <span class="stringliteral">&quot;unsigned char value &quot;</span> &lt;&lt; (uint16_t)v;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  }</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;}</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="keyword">template</span> &lt;&gt;</div><div class="line"><a name="l01869"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a126508c6ac6c5866080d02cb0edafa29"> 1869</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">MakeCheckOpValueString</a>(std::ostream* os, <span class="keyword">const</span> std::nullptr_t&amp; v) {</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  (*os) &lt;&lt; <span class="stringliteral">&quot;nullptr&quot;</span>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;}</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div><div class="line"><a name="l01873"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a1749056ff206ebc4f581e6bc0bae841d"> 1873</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a1749056ff206ebc4f581e6bc0bae841d">InitGoogleLogging</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* argv0) {</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <a class="code" href="namespacegoogle_1_1logging__internal.html#a2cfbf632d17403200c1f304a45831c58">logging_internal::InitGoogleLoggingUtilities</a>(argv0);</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;}</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;</div><div class="line"><a name="l01877"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a70bf67dee61470b69573aae771282e30"> 1877</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacegoogle.html#a70bf67dee61470b69573aae771282e30">ShutdownGoogleLogging</a>() {</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <a class="code" href="namespacegoogle_1_1logging__internal.html#ade3847fd506fd2139eba5bfb459e74ca">logging_internal::ShutdownGoogleLoggingUtilities</a>();</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  <a class="code" href="classgoogle_1_1_log_destination.html#acf47431892ab03fd10d35def7d129a1a">LogDestination::DeleteLogDestinations</a>();</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keyword">delete</span> <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <a class="code" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a> = NULL;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;}</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;}  <span class="comment">// namespace google</span></div><div class="ttc" id="structgoogle_1_1_check_op_string_html_a3e35a685fcaa15d88c35fa93cd3126c5"><div class="ttname"><a href="structgoogle_1_1_check_op_string.html#a3e35a685fcaa15d88c35fa93cd3126c5">google::CheckOpString::str_</a></div><div class="ttdeci">std::string * str_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00508">base/logging.h:508</a></div></div>
<div class="ttc" id="base_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00495">base/logging.h:495</a></div></div>
<div class="ttc" id="namespacegoogle_html_a1749056ff206ebc4f581e6bc0bae841d"><div class="ttname"><a href="namespacegoogle.html#a1749056ff206ebc4f581e6bc0bae841d">google::InitGoogleLogging</a></div><div class="ttdeci">void InitGoogleLogging(const char *argv0)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01873">base/logging.cc:1873</a></div></div>
<div class="ttc" id="namespacegoogle_1_1base_1_1internal_html_abad0e8912e4c1231b44d52109bf3c68f"><div class="ttname"><a href="namespacegoogle_1_1base_1_1internal.html#abad0e8912e4c1231b44d52109bf3c68f">google::base::internal::GetExitOnDFatal</a></div><div class="ttdeci">bool GetExitOnDFatal()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01573">base/logging.cc:1573</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_a8505d7c85d1ca04684141bb1b8113770"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a8505d7c85d1ca04684141bb1b8113770">google::LogMessage::num_messages</a></div><div class="ttdeci">static int64_t num_messages(int severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01475">base/logging.cc:1475</a></div></div>
<div class="ttc" id="base_2logging_8cc_html_a32e063544df3df8e161e59c355c5e419"><div class="ttname"><a href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a></div><div class="ttdeci">ABSL_FLAG(bool, logtostderr, false, &quot;log messages go to stderr instead of logfiles&quot;)</div></div>
<div class="ttc" id="namespacegoogle_html_a1d1a2cfb1e7c80c14baccc762df3df3f"><div class="ttname"><a href="namespacegoogle.html#a1d1a2cfb1e7c80c14baccc762df3df3f">google::SeverityToColor</a></div><div class="ttdeci">static GLogColor SeverityToColor(LogSeverity severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00248">base/logging.cc:248</a></div></div>
<div class="ttc" id="structgoogle_1_1logging__internal_1_1_crash_reason_html_ada7b81cc6d5bbe25b92c0162697e0f58"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#ada7b81cc6d5bbe25b92c0162697e0f58">google::logging_internal::CrashReason::line_number</a></div><div class="ttdeci">int line_number</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00068">logging_utilities.h:68</a></div></div>
<div class="ttc" id="log__severity_8h_html_a88e450ea80e6caaddd7d4ad0864b651d"><div class="ttname"><a href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a></div><div class="ttdeci">int LogSeverity</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00022">log_severity.h:22</a></div></div>
<div class="ttc" id="base_2logging_8cc_html_aafcef7778dce8f10842b9fa8f1266639"><div class="ttname"><a href="base_2logging_8cc.html#aafcef7778dce8f10842b9fa8f1266639">TerminalSupportsColor</a></div><div class="ttdeci">static bool TerminalSupportsColor()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00223">base/logging.cc:223</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_aa5bcfef09a25e887a41b29f9ba9be836"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#aa5bcfef09a25e887a41b29f9ba9be836">google::logging_internal::GetTID</a></div><div class="ttdeci">unsigned int GetTID()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00227">logging_utilities.cc:227</a></div></div>
<div class="ttc" id="namespacegoogle_html_aecd060345dec7a9bbb83fb0afe72948d"><div class="ttname"><a href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d">google::logging_fail</a></div><div class="ttdeci">static void logging_fail() ATTRIBUTE_NORETURN</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01382">base/logging.cc:1382</a></div></div>
<div class="ttc" id="namespacegoogle_html_a52b012381ca169c60f696aeeb54a9d77"><div class="ttname"><a href="namespacegoogle.html#a52b012381ca169c60f696aeeb54a9d77">google::SetLogDestination</a></div><div class="ttdeci">void SetLogDestination(LogSeverity severity, const char *base_filename)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01514">base/logging.cc:1514</a></div></div>
<div class="ttc" id="alldiff__cst_8cc_html_ad10edae0a852d72fb76afb1c77735045"><div class="ttname"><a href="alldiff__cst_8cc.html#ad10edae0a852d72fb76afb1c77735045">min</a></div><div class="ttdeci">int64_t min</div><div class="ttdef"><b>Definition:</b> <a href="alldiff__cst_8cc_source.html#l00139">alldiff_cst.cc:139</a></div></div>
<div class="ttc" id="namespacegoogle_html_ab90a343a65dff8ffc12a5133fd8dcbaf"><div class="ttname"><a href="namespacegoogle.html#ab90a343a65dff8ffc12a5133fd8dcbaf">google::LogToStderr</a></div><div class="ttdeci">void LogToStderr()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01567">base/logging.cc:1567</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a88e3e7b14a7388ff3771f7181732570c"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">google::LogMessage::LogMessageData::first_fatal_</a></div><div class="ttdeci">bool first_fatal_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00338">base/logging.cc:338</a></div></div>
<div class="ttc" id="classgoogle_1_1_errno_log_message_html_a642ae9bfe25d95030fe6c7b0aa89b4a4"><div class="ttname"><a href="classgoogle_1_1_errno_log_message.html#a642ae9bfe25d95030fe6c7b0aa89b4a4">google::ErrnoLogMessage::ErrnoLogMessage</a></div><div class="ttdeci">ErrnoLogMessage(const char *file, int line, LogSeverity severity, int ctr, void(LogMessage::*send_method)())</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01494">base/logging.cc:1494</a></div></div>
<div class="ttc" id="raw__logging_8h_html"><div class="ttname"><a href="raw__logging_8h.html">raw_logging.h</a></div></div>
<div class="ttc" id="base_2logging_8h_html_a7cc25402ecd7591b4c39934dd656b1f9"><div class="ttname"><a href="base_2logging_8h.html#a7cc25402ecd7591b4c39934dd656b1f9">CHECK_GE</a></div><div class="ttdeci">#define CHECK_GE(val1, val2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00706">base/logging.h:706</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html"><div class="ttname"><a href="classgoogle_1_1_log_destination.html">google::LogDestination</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00426">base/logging.cc:426</a></div></div>
<div class="ttc" id="namespacegoogle_html_a027059b87b7c0885963214923a4f5e02"><div class="ttname"><a href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">google::fatal_message</a></div><div class="ttdeci">static char fatal_message[256]</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01258">base/logging.cc:1258</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html">google::LogMessage::LogMessageData</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00315">base/logging.cc:315</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_ade3847fd506fd2139eba5bfb459e74ca"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#ade3847fd506fd2139eba5bfb459e74ca">google::logging_internal::ShutdownGoogleLoggingUtilities</a></div><div class="ttdeci">void ShutdownGoogleLoggingUtilities()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00317">logging_utilities.cc:317</a></div></div>
<div class="ttc" id="classgoogle_1_1base_1_1_logger_html"><div class="ttname"><a href="classgoogle_1_1base_1_1_logger.html">google::base::Logger</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01382">base/logging.h:1382</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_a3d9d690ef826d1e889feae7420e5bbf9"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">google::LogMessage::LogMessage</a></div><div class="ttdeci">LogMessage(const char *file, int line, LogSeverity severity, int ctr, SendMethod send_method)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01066">base/logging.cc:1066</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_fatal_html_a4a1f973130ae38c8c9799cd8af1f2873"><div class="ttname"><a href="classgoogle_1_1_log_message_fatal.html#a4a1f973130ae38c8c9799cd8af1f2873">google::LogMessageFatal::LogMessageFatal</a></div><div class="ttdeci">LogMessageFatal(const char *file, int line)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01808">base/logging.cc:1808</a></div></div>
<div class="ttc" id="structgoogle_1_1logging__internal_1_1_crash_reason_html"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html">google::logging_internal::CrashReason</a></div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00064">logging_utilities.h:64</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_a141a4160dcfa07d47161821c7e143236"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a141a4160dcfa07d47161821c7e143236">google::LogDestination::RemoveLogSink</a></div><div class="ttdeci">static void RemoveLogSink(LogSink *destination)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00580">base/logging.cc:580</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_ae0bab6f35a5369aef2554e5569fffea6"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#ae0bab6f35a5369aef2554e5569fffea6">google::LogDestination::FlushLogFiles</a></div><div class="ttdeci">static void FlushLogFiles(int min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00543">base/logging.cc:543</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_a88dfce8ed7ee385f0238de1387ea7845"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a88dfce8ed7ee385f0238de1387ea7845">google::logging_internal::SetCrashReason</a></div><div class="ttdeci">void SetCrashReason(const CrashReason *r)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00299">logging_utilities.cc:299</a></div></div>
<div class="ttc" id="log__severity_8h_html_ac9bcbe19995a8140cd4ec61773cd6e67"><div class="ttname"><a href="log__severity_8h.html#ac9bcbe19995a8140cd4ec61773cd6e67">ERROR</a></div><div class="ttdeci">const int ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00032">log_severity.h:32</a></div></div>
<div class="ttc" id="namespacegoogle_html_aac637fad473b5677c3f94fb8372257b0"><div class="ttname"><a href="namespacegoogle.html#aac637fad473b5677c3f94fb8372257b0">google::AddLogSink</a></div><div class="ttdeci">void AddLogSink(LogSink *destination)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01551">base/logging.cc:1551</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_a189879d36ceaa7e619dcdf55c16f98b2"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">google::LogDestination::SetStderrLogging</a></div><div class="ttdeci">static void SetStderrLogging(LogSeverity min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00605">base/logging.cc:605</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_a7d7631cb9c19962577211ac1a7a85c58"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a7d7631cb9c19962577211ac1a7a85c58">google::LogDestination::LogToStderr</a></div><div class="ttdeci">static void LogToStderr()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00613">base/logging.cc:613</a></div></div>
<div class="ttc" id="namespacegoogle_html_ada71130f5f3b55dbec713c608b9e5447"><div class="ttname"><a href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447">google::crash_reason</a></div><div class="ttdeci">static logging_internal::CrashReason crash_reason</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01049">base/logging.cc:1049</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_sink_html_a0e3384308bca57a6a44f3c2b5258ffb1"><div class="ttname"><a href="classgoogle_1_1_log_sink.html#a0e3384308bca57a6a44f3c2b5258ffb1">google::LogSink::send</a></div><div class="ttdeci">virtual void send(LogSeverity severity, const char *full_filename, const char *base_filename, int line, const struct ::tm *tm_time, const char *message, size_t message_len)=0</div></div>
<div class="ttc" id="base_2logging_8cc_html_adc29f16e0cd8a868b42ac92d5fc437b9"><div class="ttname"><a href="base_2logging_8cc.html#adc29f16e0cd8a868b42ac92d5fc437b9">FixFlagsAndEnvironmentForSwig</a></div><div class="ttdeci">void FixFlagsAndEnvironmentForSwig()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00061">base/logging.cc:61</a></div></div>
<div class="ttc" id="namespacegoogle_html_a34245749cbb78aef93c6652a3eb981d6"><div class="ttname"><a href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6">google::logging_fail_func_t</a></div><div class="ttdeci">void(* logging_fail_func_t)() ATTRIBUTE_NORETURN</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01384">base/logging.cc:1384</a></div></div>
<div class="ttc" id="classgoogle_1_1base_1_1_check_op_message_builder_html_ae33b6f12ae75f7312d6bfd59ba4e7509"><div class="ttname"><a href="classgoogle_1_1base_1_1_check_op_message_builder.html#ae33b6f12ae75f7312d6bfd59ba4e7509">google::base::CheckOpMessageBuilder::ForVar2</a></div><div class="ttdeci">std::ostream * ForVar2()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01829">base/logging.cc:1829</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a9d8241f1d596b53f65ba985cc108a013"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">google::LogMessage::LogMessageData::send_method_</a></div><div class="ttdeci">void(LogMessage::* send_method_)()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00324">base/logging.cc:324</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a8b2792dbbc5fccae93ac601113141d98"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">google::LogMessage::LogMessageData::message_text_</a></div><div class="ttdeci">char message_text_[LogMessage::kMaxLogMessageLen+1]</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00320">base/logging.cc:320</a></div></div>
<div class="ttc" id="base_2logging_8h_html_accad43a85d781d53381cd53a9894b6ae"><div class="ttname"><a href="base_2logging_8h.html#accad43a85d781d53381cd53a9894b6ae">LOG</a></div><div class="ttdeci">#define LOG(severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00420">base/logging.h:420</a></div></div>
<div class="ttc" id="namespacegoogle_html_aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">google::COLOR_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_1_1_log_stream_html"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html">google::LogMessage::LogStream</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01035">base/logging.h:1035</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_sink_html_a68c6c88e8a64d08d3c070bd014ce7172"><div class="ttname"><a href="classgoogle_1_1_log_sink.html#a68c6c88e8a64d08d3c070bd014ce7172">google::LogSink::ToString</a></div><div class="ttdeci">static std::string ToString(LogSeverity severity, const char *file, int line, const struct ::tm *tm_time, const char *message, size_t message_len)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01528">base/logging.cc:1528</a></div></div>
<div class="ttc" id="namespacegoogle_html_aa0499f87843a0da8d1615089b60ae4eb"><div class="ttname"><a href="namespacegoogle.html#aa0499f87843a0da8d1615089b60ae4eb">google::ShellEscape</a></div><div class="ttdeci">static string ShellEscape(const string &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01603">base/logging.cc:1603</a></div></div>
<div class="ttc" id="base_2logging_8cc_html_a256a5721249aa3309437212cc21a9fe4"><div class="ttname"><a href="base_2logging_8cc.html#a256a5721249aa3309437212cc21a9fe4">PATH_SEPARATOR</a></div><div class="ttdeci">#define PATH_SEPARATOR</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00176">base/logging.cc:176</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_sink_html_a96a54d485a8e3745eabd2859e6c3bb0a"><div class="ttname"><a href="classgoogle_1_1_log_sink.html#a96a54d485a8e3745eabd2859e6c3bb0a">google::LogSink::WaitTillSent</a></div><div class="ttdeci">virtual void WaitTillSent()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01524">base/logging.cc:1524</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_a09be921a693a28c291c76b71c5e030c6"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">google::LogMessage::SendToLog</a></div><div class="ttdeci">void SendToLog()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01272">base/logging.cc:1272</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_a1bc1ccffe41da1564b1bec29b08fc4e1"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a1bc1ccffe41da1564b1bec29b08fc4e1">google::LogDestination::FlushLogFilesUnsafe</a></div><div class="ttdeci">static void FlushLogFilesUnsafe(int min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00530">base/logging.cc:530</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_a043cd6b97be276f99eea8f0ea3ece475"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a043cd6b97be276f99eea8f0ea3ece475">google::LogDestination::AddLogSink</a></div><div class="ttdeci">static void AddLogSink(LogSink *destination)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00572">base/logging.cc:572</a></div></div>
<div class="ttc" id="namespacegoogle_html_a875b970c781b18261024464edf1c1286"><div class="ttname"><a href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">google::MakeCheckOpValueString</a></div><div class="ttdeci">void MakeCheckOpValueString(std::ostream *os, const char &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01842">base/logging.cc:1842</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a28966ba90809d1189db93cf6d8d7b3c2"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">google::LogMessage::LogMessageData::message_</a></div><div class="ttdeci">std::string * message_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00328">base/logging.cc:328</a></div></div>
<div class="ttc" id="logging__utilities_8h_html"><div class="ttname"><a href="logging__utilities_8h.html">logging_utilities.h</a></div></div>
<div class="ttc" id="namespacegoogle_html_a5093faa29d594a5fe593decdd4de8427"><div class="ttname"><a href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">google::exit_on_dfatal</a></div><div class="ttdeci">static bool exit_on_dfatal</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00362">base/logging.cc:362</a></div></div>
<div class="ttc" id="namespacegoogle_html_a202f492760d99ffd8e85989cc2393be9"><div class="ttname"><a href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">google::log_mutex</a></div><div class="ttdeci">static absl::Mutex log_mutex</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00350">base/logging.cc:350</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_abfdae073349de1c469785d4be5d262a6"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">google::LogMessage::LogMessageData::outvec_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; * outvec_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00327">base/logging.cc:327</a></div></div>
<div class="ttc" id="namespacegoogle_html_a7b8269d76dce27d5f880ba2dbf35382c"><div class="ttname"><a href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c">google::fatal_msg_exclusive</a></div><div class="ttdeci">static bool fatal_msg_exclusive</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01050">base/logging.cc:1050</a></div></div>
<div class="ttc" id="io_8h_html"><div class="ttname"><a href="io_8h.html">io.h</a></div></div>
<div class="ttc" id="base_2logging_8h_html_a3f16e4372f664c60d5dd95421a171a4b"><div class="ttname"><a href="base_2logging_8h.html#a3f16e4372f664c60d5dd95421a171a4b">CHECK_STRNE</a></div><div class="ttdeci">#define CHECK_STRNE(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00741">base/logging.h:741</a></div></div>
<div class="ttc" id="namespacegoogle_html_aa25e41570c47498a3c40189913d2ed81"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">google::GLogColor</a></div><div class="ttdeci">GLogColor</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="structgoogle_1_1logging__internal_1_1_crash_reason_html_a7efa5e9c7494c7d4586359300221aa5d"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a7efa5e9c7494c7d4586359300221aa5d">google::logging_internal::CrashReason::filename</a></div><div class="ttdeci">const char * filename</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00067">logging_utilities.h:67</a></div></div>
<div class="ttc" id="namespacegoogle_html_aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">google::COLOR_YELLOW</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_1_1_log_stream_html_ae8ceb65aeef61f5cebbd0e2860c6d7c3"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html#ae8ceb65aeef61f5cebbd0e2860c6d7c3">google::LogMessage::LogStream::set_ctr</a></div><div class="ttdeci">void set_ctr(int ctr)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01044">base/logging.h:1044</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a923aff6e0f1225440f1a3d9e21b99adf"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">google::LogMessage::LogMessageData::num_chars_to_log_</a></div><div class="ttdeci">size_t num_chars_to_log_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00333">base/logging.cc:333</a></div></div>
<div class="ttc" id="namespacegoogle_html_a001f0868c92c66aa4991da10384c5304"><div class="ttname"><a href="namespacegoogle.html#a001f0868c92c66aa4991da10384c5304">google::operator&lt;&lt;</a></div><div class="ttdeci">ostream &amp; operator&lt;&lt;(ostream &amp;os, const PRIVATE_Counter &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01482">base/logging.cc:1482</a></div></div>
<div class="ttc" id="classgoogle_1_1_errno_log_message_html_acd60ba4091f3d6c1a17f9142b29db3da"><div class="ttname"><a href="classgoogle_1_1_errno_log_message.html#acd60ba4091f3d6c1a17f9142b29db3da">google::ErrnoLogMessage::~ErrnoLogMessage</a></div><div class="ttdeci">~ErrnoLogMessage()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01499">base/logging.cc:1499</a></div></div>
<div class="ttc" id="base_2logging_8h_html_a4bd2e815ca2f702a4b6aa744b1ff3b82"><div class="ttname"><a href="base_2logging_8h.html#a4bd2e815ca2f702a4b6aa744b1ff3b82">CHECK_LT</a></div><div class="ttdeci">#define CHECK_LT(val1, val2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00705">base/logging.h:705</a></div></div>
<div class="ttc" id="namespacegoogle_html_a24c103ec1d724a52eef23cbe8eb101cf"><div class="ttname"><a href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf">google::g_logging_fail_func</a></div><div class="ttdeci">GOOGLE_GLOG_DLL_DECL logging_fail_func_t g_logging_fail_func</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01387">base/logging.cc:1387</a></div></div>
<div class="ttc" id="namespacegoogle_html_aa739a176bcc5230a3536ef27a860c1a8"><div class="ttname"><a href="namespacegoogle.html#aa739a176bcc5230a3536ef27a860c1a8">google::PRIVATE_Counter</a></div><div class="ttdeci">PRIVATE_Counter</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00862">base/logging.h:862</a></div></div>
<div class="ttc" id="namespacegoogle_html_aa68b268a02d18e2965e36f4211777db6"><div class="ttname"><a href="namespacegoogle.html#aa68b268a02d18e2965e36f4211777db6">google::kDontNeedShellEscapeChars</a></div><div class="ttdeci">static const char kDontNeedShellEscapeChars[]</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01598">base/logging.cc:1598</a></div></div>
<div class="ttc" id="namespacegoogle_html_ae0f8ace9dff19cd627f09dbfaa8aae1b"><div class="ttname"><a href="namespacegoogle.html#ae0f8ace9dff19cd627f09dbfaa8aae1b">google::TestOnly_ClearLoggingDirectoriesList</a></div><div class="ttdeci">void TestOnly_ClearLoggingDirectoriesList()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01706">base/logging.cc:1706</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_aeb92d4addb41255c9732cacfcb54f795"><div class="ttname"><a href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795">google::LogMessage::Fail</a></div><div class="ttdeci">static void ATTRIBUTE_NORETURN Fail()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01393">base/logging.cc:1393</a></div></div>
<div class="ttc" id="classgoogle_1_1base_1_1_check_op_message_builder_html_a1333dd08e59ead3b1e40c82981c3f805"><div class="ttname"><a href="classgoogle_1_1base_1_1_check_op_message_builder.html#a1333dd08e59ead3b1e40c82981c3f805">google::base::CheckOpMessageBuilder::CheckOpMessageBuilder</a></div><div class="ttdeci">CheckOpMessageBuilder(const char *exprtext)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01822">base/logging.cc:1822</a></div></div>
<div class="ttc" id="namespacegoogle_1_1base_html_a50d33a682377552803e3bda0568358ad"><div class="ttname"><a href="namespacegoogle_1_1base.html#a50d33a682377552803e3bda0568358ad">google::base::GetLogger</a></div><div class="ttdeci">GOOGLE_GLOG_DLL_DECL Logger * GetLogger(LogSeverity level)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01464">base/logging.cc:1464</a></div></div>
<div class="ttc" id="base_2logging_8cc_html_ab72362766bf1498f7ba9efb428cb460f"><div class="ttname"><a href="base_2logging_8cc.html#ab72362766bf1498f7ba9efb428cb460f">DefaultLogDir</a></div><div class="ttdeci">static const char * DefaultLogDir()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00141">base/logging.cc:141</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_ad2b6d3c512b3585000bd9c2822c1e52e"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">google::LogMessage::LogMessageData::basename_</a></div><div class="ttdeci">const char * basename_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00335">base/logging.cc:335</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_a07cf4471662221986927d079727609d8"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a07cf4471662221986927d079727609d8">google::logging_internal::DumpStackTraceToString</a></div><div class="ttdeci">void DumpStackTraceToString(std::string *stacktrace)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00291">logging_utilities.cc:291</a></div></div>
<div class="ttc" id="constraint__solver_8cc_html_a395f613555f398dd389670bb4c2a4599"><div class="ttname"><a href="constraint__solver_8cc.html#a395f613555f398dd389670bb4c2a4599">next</a></div><div class="ttdeci">Block * next</div><div class="ttdef"><b>Definition:</b> <a href="constraint__solver_8cc_source.html#l00678">constraint_solver.cc:678</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_1_1_log_stream_html_afba3807a4b1ff505547b010b84e50cce"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html#afba3807a4b1ff505547b010b84e50cce">google::LogMessage::LogStream::self</a></div><div class="ttdeci">LogStream * self() const</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01045">base/logging.h:1045</a></div></div>
<div class="ttc" id="namespacegoogle_html_a45aa0ee16eb826aae8bef8160098a1ae"><div class="ttname"><a href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">google::logging_directories_list</a></div><div class="ttdeci">static vector&lt; string &gt; * logging_directories_list</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01681">base/logging.cc:1681</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a1b911b3abca8051fd7441126a95a0254"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">google::LogMessage::LogMessageData::timestamp_</a></div><div class="ttdeci">time_t timestamp_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00330">base/logging.cc:330</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_af7f329ac8ea043562147dbaa396d4255"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">google::LogMessage::LogMessageData::num_chars_to_syslog_</a></div><div class="ttdeci">size_t num_chars_to_syslog_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00334">base/logging.cc:334</a></div></div>
<div class="ttc" id="namespacegoogle_html_a27fd092cfd7530a45451a8e0b0fcdf8e"><div class="ttname"><a href="namespacegoogle.html#a27fd092cfd7530a45451a8e0b0fcdf8e">google::FlushLogFilesUnsafe</a></div><div class="ttdeci">void FlushLogFilesUnsafe(LogSeverity min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01510">base/logging.cc:1510</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_a985aad81e2a79fbd14719099bf9f788d"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">google::LogDestination::SetLogDestination</a></div><div class="ttdeci">static void SetLogDestination(LogSeverity severity, const char *base_filename)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00555">base/logging.cc:555</a></div></div>
<div class="ttc" id="base_2logging_8cc_html_afaad0abfed30e8ee5ae7d27b5ecea29f"><div class="ttname"><a href="base_2logging_8cc.html#afaad0abfed30e8ee5ae7d27b5ecea29f">ATTRIBUTE_NORETURN</a></div><div class="ttdeci">#define ATTRIBUTE_NORETURN</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01372">base/logging.cc:1372</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_ab56904740774e794fb63d946debb899f"><div class="ttname"><a href="classgoogle_1_1_log_message.html#ab56904740774e794fb63d946debb899f">google::LogMessage::kMaxLogMessageLen</a></div><div class="ttdeci">static const size_t kMaxLogMessageLen</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01114">base/logging.h:1114</a></div></div>
<div class="ttc" id="namespacegoogle_html_a8688e486af1a034920af845ceba0952f"><div class="ttname"><a href="namespacegoogle.html#a8688e486af1a034920af845ceba0952f">google::StrError</a></div><div class="ttdeci">string StrError(int err)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01799">base/logging.cc:1799</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_ac6be87e218241680245d9fac1b530ad4"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#ac6be87e218241680245d9fac1b530ad4">google::logging_internal::GetMainThreadPid</a></div><div class="ttdeci">int32_t GetMainThreadPid()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00236">logging_utilities.cc:236</a></div></div>
<div class="ttc" id="namespacegoogle_html_ac452c4c8ec1cbc24dd074e260aa0b617"><div class="ttname"><a href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">google::GLOG_FATAL</a></div><div class="ttdeci">const int GLOG_FATAL</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00025">log_severity.h:25</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a1d3fb731f115f67d6c1e4e38588572ae"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">google::LogMessage::LogMessageData::severity_</a></div><div class="ttdeci">char severity_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00322">base/logging.cc:322</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a689d7ba2721c7e7935b5501a83948154"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">google::LogMessage::LogMessageData::preserved_errno_</a></div><div class="ttdeci">int preserved_errno_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00318">base/logging.cc:318</a></div></div>
<div class="ttc" id="namespacegoogle_html_a861f0c066ef30bb3d7b4e442f55f93af"><div class="ttname"><a href="namespacegoogle.html#a861f0c066ef30bb3d7b4e442f55f93af">google::fatal_msg_data_shared</a></div><div class="ttdeci">static LogMessage::LogMessageData fatal_msg_data_shared</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01052">base/logging.cc:1052</a></div></div>
<div class="ttc" id="namespacegoogle_1_1base_html_a754a333359f5c02714711bb4e01417b0"><div class="ttname"><a href="namespacegoogle_1_1base.html#a754a333359f5c02714711bb4e01417b0">google::base::SetLogger</a></div><div class="ttdeci">GOOGLE_GLOG_DLL_DECL void SetLogger(LogSeverity level, Logger *logger)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01469">base/logging.cc:1469</a></div></div>
<div class="ttc" id="namespacegoogle_html_aab2b99122a259ede199e6872c7f367bf"><div class="ttname"><a href="namespacegoogle.html#aab2b99122a259ede199e6872c7f367bf">google::MaxLogSize</a></div><div class="ttdeci">static int32_t MaxLogSize()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00305">base/logging.cc:305</a></div></div>
<div class="ttc" id="namespacegoogle_1_1base_1_1internal_html_a794f86364cecaf6c630c587cc2ad002c"><div class="ttname"><a href="namespacegoogle_1_1base_1_1internal.html#a794f86364cecaf6c630c587cc2ad002c">google::base::internal::SetExitOnDFatal</a></div><div class="ttdeci">void SetExitOnDFatal(bool value)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01589">base/logging.cc:1589</a></div></div>
<div class="ttc" id="namespacegoogle_html_a407c4496d81fae1029e8800dd42ac68e"><div class="ttname"><a href="namespacegoogle.html#a407c4496d81fae1029e8800dd42ac68e">google::fatal_msg_lock</a></div><div class="ttdeci">static absl::Mutex fatal_msg_lock</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01048">base/logging.cc:1048</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_aa0c333addf51e66c448c4be972b8974f"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">google::LogMessage::LogMessageData::has_been_flushed_</a></div><div class="ttdeci">bool has_been_flushed_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00337">base/logging.cc:337</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_a3ea77f17c72e61d4ca8b21433e629d43"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a3ea77f17c72e61d4ca8b21433e629d43">google::LogMessage::SendToSyslogAndLog</a></div><div class="ttdeci">void SendToSyslogAndLog()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01443">base/logging.cc:1443</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_fatal_html_ac9c99773209b46c9f963028abea613e2"><div class="ttname"><a href="classgoogle_1_1_log_message_fatal.html#ac9c99773209b46c9f963028abea613e2">google::LogMessageFatal::~LogMessageFatal</a></div><div class="ttdeci">ATTRIBUTE_NORETURN ~LogMessageFatal()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01815">base/logging.cc:1815</a></div></div>
<div class="ttc" id="namespacegoogle_html_a85e200fc02aea6b6196148088fa23c3e"><div class="ttname"><a href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">google::LogSeverityNames</a></div><div class="ttdeci">GOOGLE_GLOG_DLL_DECL const char *const LogSeverityNames[NUM_SEVERITIES]</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00358">base/logging.cc:358</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_afe46bfff74b48e9702894c87d8b00dcd"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">google::LogMessage::LogMessageData::fullname_</a></div><div class="ttdeci">const char * fullname_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00336">base/logging.cc:336</a></div></div>
<div class="ttc" id="namespacegoogle_html_a60193b592b1a0e1d930682ade407ad63"><div class="ttname"><a href="namespacegoogle.html#a60193b592b1a0e1d930682ade407ad63">google::GetLogSeverityName</a></div><div class="ttdeci">const char * GetLogSeverityName(LogSeverity severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00364">base/logging.cc:364</a></div></div>
<div class="ttc" id="namespacegoogle_html_a931d134061563f4e07e764641989db9b"><div class="ttname"><a href="namespacegoogle.html#a931d134061563f4e07e764641989db9b">google::thread_msg_data</a></div><div class="ttdeci">static thread_local std::aligned_storage&lt; sizeof(LogMessage::LogMessageData), alignof(LogMessage::LogMessageData)&gt;::type thread_msg_data</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01061">base/logging.cc:1061</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_af7c52c82f4832b6bfabe0c86a0c19d2e"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#af7c52c82f4832b6bfabe0c86a0c19d2e">google::logging_internal::const_basename</a></div><div class="ttdeci">const char * const_basename(const char *filepath)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00238">logging_utilities.cc:238</a></div></div>
<div class="ttc" id="base_2logging_8h_html_ad16cc5f247382150f402b7c9365cb4e7"><div class="ttname"><a href="base_2logging_8h.html#ad16cc5f247382150f402b7c9365cb4e7">CHECK_STREQ</a></div><div class="ttdeci">#define CHECK_STREQ(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00740">base/logging.h:740</a></div></div>
<div class="ttc" id="namespacegoogle_html_aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">google::COLOR_RED</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="base_2logging_8cc_html_a569b19919e8d89c64fbe5d5209466b1a"><div class="ttname"><a href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">GetHostName</a></div><div class="ttdeci">static void GetHostName(string *hostname)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00203">base/logging.cc:203</a></div></div>
<div class="ttc" id="namespacegoogle_html_aec61ff6c741224bbf1d230d40449aa30"><div class="ttname"><a href="namespacegoogle.html#aec61ff6c741224bbf1d230d40449aa30">google::GLOG_ERROR</a></div><div class="ttdeci">const int GLOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00025">log_severity.h:25</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_ad4e8b6d60d503dfde0b01d1311a3c820"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#ad4e8b6d60d503dfde0b01d1311a3c820">google::LogDestination::terminal_supports_color</a></div><div class="ttdeci">static const bool &amp; terminal_supports_color()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00452">base/logging.cc:452</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html"><div class="ttname"><a href="classgoogle_1_1_log_message.html">google::LogMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01017">base/logging.h:1017</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_af8454039845aad804abcbabf98b68b23"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#af8454039845aad804abcbabf98b68b23">google::logging_internal::CycleClock_Now</a></div><div class="ttdeci">int64_t CycleClock_Now()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00231">logging_utilities.cc:231</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a629f52c6174f3e6ff61d30f91bea76f5"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a629f52c6174f3e6ff61d30f91bea76f5">google::LogMessage::LogMessageData::tm_time_</a></div><div class="ttdeci">struct ::tm tm_time_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00331">base/logging.cc:331</a></div></div>
<div class="ttc" id="structgoogle_1_1logging__internal_1_1_crash_reason_html_a254bf0858da09c96a48daf64404eb4f8"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a254bf0858da09c96a48daf64404eb4f8">google::logging_internal::CrashReason::message</a></div><div class="ttdeci">const char * message</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00069">logging_utilities.h:69</a></div></div>
<div class="ttc" id="namespacegoogle_html_adec21a5ba9511e6a6b2c09b0dbdf5fb8"><div class="ttname"><a href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">google::stop_writing</a></div><div class="ttdeci">static bool stop_writing</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00356">base/logging.cc:356</a></div></div>
<div class="ttc" id="namespacegoogle_html_ae4e2c48deea609dcb515b027460c3f5e"><div class="ttname"><a href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">google::WriteToStderr</a></div><div class="ttdeci">static void WriteToStderr(const char *message, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00660">base/logging.cc:660</a></div></div>
<div class="ttc" id="trace_8cc_html_a36bd74109f547f7f8198faf5a12d2879"><div class="ttname"><a href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition:</b> <a href="trace_8cc_source.html#l00398">trace.cc:398</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_a0e2644b2df3c228e8d71a55b60723f31"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31">google::LogMessage::Flush</a></div><div class="ttdeci">void Flush()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01201">base/logging.cc:1201</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_sink_html_a579e2c28338fc8411ddfb3789f3b901d"><div class="ttname"><a href="classgoogle_1_1_log_sink.html#a579e2c28338fc8411ddfb3789f3b901d">google::LogSink::~LogSink</a></div><div class="ttdeci">virtual ~LogSink()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01522">base/logging.cc:1522</a></div></div>
<div class="ttc" id="base_2logging_8h_html_a857e59ac16481af7fc86f54c774f84c9"><div class="ttname"><a href="base_2logging_8h.html#a857e59ac16481af7fc86f54c774f84c9">CHECK_STRCASEEQ</a></div><div class="ttdeci">#define CHECK_STRCASEEQ(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00742">base/logging.h:742</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_a43adca49683a5766aecb000c340e988c"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a43adca49683a5766aecb000c340e988c">google::logging_internal::ProgramInvocationShortName</a></div><div class="ttdeci">const char * ProgramInvocationShortName()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00214">logging_utilities.cc:214</a></div></div>
<div class="ttc" id="namespacegoogle_html_afb08de7bff9aaa916db76a47bcd9077a"><div class="ttname"><a href="namespacegoogle.html#afb08de7bff9aaa916db76a47bcd9077a">google::RemoveLogSink</a></div><div class="ttdeci">void RemoveLogSink(LogSink *destination)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01555">base/logging.cc:1555</a></div></div>
<div class="ttc" id="namespacegoogle_html_af369c55174d4dd5587c539e01158c905"><div class="ttname"><a href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905">google::GetTempDirectories</a></div><div class="ttdeci">static void GetTempDirectories(vector&lt; string &gt; *list)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01632">base/logging.cc:1632</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_1_1_log_stream_html_a2752f4361bbc1b5a3158ebaf821d97b4"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html#a2752f4361bbc1b5a3158ebaf821d97b4">google::LogMessage::LogStream::pcount</a></div><div class="ttdeci">size_t pcount() const</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01048">base/logging.h:1048</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_abc6126af1d45847bc59afa0aa3216b04af8756cb52a8aac6329e43782e08f69e5"><div class="ttname"><a href="classgoogle_1_1_log_message.html#abc6126af1d45847bc59afa0aa3216b04af8756cb52a8aac6329e43782e08f69e5">google::LogMessage::kNoLogPrefix</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01025">base/logging.h:1025</a></div></div>
<div class="ttc" id="base_2logging_8cc_html_a31902dd802cefb2e7082b1f31fc0ab8b"><div class="ttname"><a href="base_2logging_8cc.html#a31902dd802cefb2e7082b1f31fc0ab8b">ABSL_DECLARE_FLAG</a></div><div class="ttdeci">ABSL_DECLARE_FLAG(bool, log_prefix)</div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_aa727b54ca243e836a04f0d58bb2567f8"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">google::LogMessage::LogMessageData::num_prefix_chars_</a></div><div class="ttdeci">size_t num_prefix_chars_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00332">base/logging.cc:332</a></div></div>
<div class="ttc" id="raw__logging_8h_html_a791abe51d9a64e98d30631fdf23e33da"><div class="ttname"><a href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a></div><div class="ttdeci">#define RAW_DCHECK(condition, message)</div><div class="ttdef"><b>Definition:</b> <a href="raw__logging_8h_source.html#l00117">raw_logging.h:117</a></div></div>
<div class="ttc" id="namespacegoogle_html_ad0cffd6498cbf357c5f3c1b7c3683c84"><div class="ttname"><a href="namespacegoogle.html#ad0cffd6498cbf357c5f3c1b7c3683c84">google::FlushLogFiles</a></div><div class="ttdeci">void FlushLogFiles(LogSeverity min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01506">base/logging.cc:1506</a></div></div>
<div class="ttc" id="structgoogle_1_1logging__internal_1_1_crash_reason_html_acb5ba97551079e0b072c62c21d784ac5"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#acb5ba97551079e0b072c62c21d784ac5">google::logging_internal::CrashReason::depth</a></div><div class="ttdeci">int depth</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00074">logging_utilities.h:74</a></div></div>
<div class="ttc" id="base_2logging_8h_html"><div class="ttname"><a href="base_2logging_8h.html">logging.h</a></div></div>
<div class="ttc" id="classgoogle_1_1base_1_1_check_op_message_builder_html_aaa8346df261ac8c17bb4c36b84330f8c"><div class="ttname"><a href="classgoogle_1_1base_1_1_check_op_message_builder.html#aaa8346df261ac8c17bb4c36b84330f8c">google::base::CheckOpMessageBuilder::~CheckOpMessageBuilder</a></div><div class="ttdeci">~CheckOpMessageBuilder()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01827">base/logging.cc:1827</a></div></div>
<div class="ttc" id="structgoogle_1_1logging__internal_1_1_crash_reason_html_a155108dfb07b71f192a35ce75199ed33"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a155108dfb07b71f192a35ce75199ed33">google::logging_internal::CrashReason::stack</a></div><div class="ttdeci">void * stack[32]</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00073">logging_utilities.h:73</a></div></div>
<div class="ttc" id="namespacegoogle_html_af3c2db675e75f2074724f754d3cf7885"><div class="ttname"><a href="namespacegoogle.html#af3c2db675e75f2074724f754d3cf7885">google::GLOG_INFO</a></div><div class="ttdeci">const int GLOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00025">log_severity.h:25</a></div></div>
<div class="ttc" id="namespacegoogle_html_a8c3a96b28a44e635d84d6fb2517b411b"><div class="ttname"><a href="namespacegoogle.html#a8c3a96b28a44e635d84d6fb2517b411b">google::posix_strerror_r</a></div><div class="ttdeci">int posix_strerror_r(int err, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01749">base/logging.cc:1749</a></div></div>
<div class="ttc" id="namespacegoogle_html_a9800270f9c517ac3c4f1a69d2d79d1ff"><div class="ttname"><a href="namespacegoogle.html#a9800270f9c517ac3c4f1a69d2d79d1ff">google::SetLogSymlink</a></div><div class="ttdeci">void SetLogSymlink(LogSeverity severity, const char *symlink_basename)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01518">base/logging.cc:1518</a></div></div>
<div class="ttc" id="namespacegoogle_html_a63b37be54b6c05f2d1523081b4089c19"><div class="ttname"><a href="namespacegoogle.html#a63b37be54b6c05f2d1523081b4089c19">google::GetExistingTempDirectories</a></div><div class="ttdeci">void GetExistingTempDirectories(vector&lt; string &gt; *list)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01714">base/logging.cc:1714</a></div></div>
<div class="ttc" id="namespaceinternal_html"><div class="ttname"><a href="namespaceinternal.html">internal</a></div><div class="ttdef"><b>Definition:</b> <a href="bop__parameters_8pb_8h_source.html#l00039">bop_parameters.pb.h:39</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_1_1_log_stream_html_a73e0d9048f393bf907a3f69033ab8a7f"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html#a73e0d9048f393bf907a3f69033ab8a7f">google::LogMessage::LogStream::ctr</a></div><div class="ttdeci">int ctr() const</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01043">base/logging.h:1043</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_aa3792ddc75755350b76a7b196369eda3"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#aa3792ddc75755350b76a7b196369eda3">google::logging_internal::IsGoogleLoggingInitialized</a></div><div class="ttdeci">bool IsGoogleLoggingInitialized()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00223">logging_utilities.cc:223</a></div></div>
<div class="ttc" id="namespacegoogle_html_a0069c3deacbf0c307a0af6a7fa6c212e"><div class="ttname"><a href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">google::thread_data_available</a></div><div class="ttdeci">static thread_local bool thread_data_available</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01057">base/logging.cc:1057</a></div></div>
<div class="ttc" id="namespacegoogle_html_a623d2ea68ef6922bf6c53bc28c5f190a"><div class="ttname"><a href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">google::NUM_SEVERITIES</a></div><div class="ttdeci">const int NUM_SEVERITIES</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00026">log_severity.h:26</a></div></div>
<div class="ttc" id="structgoogle_1_1_check_op_string_html"><div class="ttname"><a href="structgoogle_1_1_check_op_string.html">google::CheckOpString</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00501">base/logging.h:501</a></div></div>
<div class="ttc" id="namespacegoogle_html_a4f56829b020851f8919bdb557b6c10cf"><div class="ttname"><a href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">google::ColoredWriteToStderr</a></div><div class="ttdeci">static void ColoredWriteToStderr(LogSeverity severity, const char *message, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00622">base/logging.cc:622</a></div></div>
<div class="ttc" id="classgoogle_1_1base_1_1_logger_html_aff3353d816df11999ea7a0804b76e0c1"><div class="ttname"><a href="classgoogle_1_1base_1_1_logger.html#aff3353d816df11999ea7a0804b76e0c1">google::base::Logger::Flush</a></div><div class="ttdeci">virtual void Flush()=0</div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_ae015332540cd90572adfe5e5588227c6"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#ae015332540cd90572adfe5e5588227c6">google::LogDestination::hostname</a></div><div class="ttdeci">static const string &amp; hostname()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00517">base/logging.cc:517</a></div></div>
<div class="ttc" id="classgoogle_1_1base_1_1_check_op_message_builder_html_a5722d0eb48c3be72479813d564dfebbc"><div class="ttname"><a href="classgoogle_1_1base_1_1_check_op_message_builder.html#a5722d0eb48c3be72479813d564dfebbc">google::base::CheckOpMessageBuilder::NewString</a></div><div class="ttdeci">std::string * NewString()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01834">base/logging.cc:1834</a></div></div>
<div class="ttc" id="namespacegoogle_html_ab675835107a9fba3f4b1fc920516b5bf"><div class="ttname"><a href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf">google::fatal_time</a></div><div class="ttdeci">static time_t fatal_time</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01257">base/logging.cc:1257</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_sink_html"><div class="ttname"><a href="classgoogle_1_1_log_sink.html">google::LogSink</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01288">base/logging.h:1288</a></div></div>
<div class="ttc" id="namespacegoogle_html_a80d0d63d8be7a9721961916a9ab9a9c3"><div class="ttname"><a href="namespacegoogle.html#a80d0d63d8be7a9721961916a9ab9a9c3">google::InstallFailureFunction</a></div><div class="ttdeci">void InstallFailureFunction(void(*fail_func)())</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01389">base/logging.cc:1389</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_a583ab3eb7226577fd24179c256425f98"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">google::LogMessage::LogMessageData::sink_</a></div><div class="ttdeci">LogSink * sink_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00326">base/logging.cc:326</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_a67f05b74958c4c9f2a0b39df9581bf1c"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a67f05b74958c4c9f2a0b39df9581bf1c">google::LogDestination::SetLogSymlink</a></div><div class="ttdeci">static void SetLogSymlink(LogSeverity severity, const char *symlink_basename)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00564">base/logging.cc:564</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_a2cfbf632d17403200c1f304a45831c58"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a2cfbf632d17403200c1f304a45831c58">google::logging_internal::InitGoogleLoggingUtilities</a></div><div class="ttdeci">void InitGoogleLoggingUtilities(const char *argv0)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00304">logging_utilities.cc:304</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_acf47431892ab03fd10d35def7d129a1a"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#acf47431892ab03fd10d35def7d129a1a">google::LogDestination::DeleteLogDestinations</a></div><div class="ttdeci">static void DeleteLogDestinations()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00737">base/logging.cc:737</a></div></div>
<div class="ttc" id="namespacegoogle_html_a40cb559795a506a869f6643c1bd949ca"><div class="ttname"><a href="namespacegoogle.html#a40cb559795a506a869f6643c1bd949ca">google::GetAnsiColorCode</a></div><div class="ttdeci">static const char * GetAnsiColorCode(GLogColor color)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00288">base/logging.cc:288</a></div></div>
<div class="ttc" id="commandlineflags_8h_html"><div class="ttname"><a href="commandlineflags_8h.html">commandlineflags.h</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_a0a01fdbc8c975aae6c3dba8d00692e77"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77">google::LogMessage::preserved_errno</a></div><div class="ttdeci">int preserved_errno() const</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01195">base/logging.cc:1195</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_ad619d07eb80a509b28505be39cc07532"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">google::LogMessage::LogMessageData::stream_</a></div><div class="ttdeci">LogStream stream_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00321">base/logging.cc:321</a></div></div>
<div class="ttc" id="base_2logging_8h_html_ab8e59a3e48687f8db849d28901f0bac8"><div class="ttname"><a href="base_2logging_8h.html#ab8e59a3e48687f8db849d28901f0bac8">CHECK_STRCASENE</a></div><div class="ttdeci">#define CHECK_STRCASENE(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00743">base/logging.h:743</a></div></div>
<div class="ttc" id="namespacegoogle_html_afe9db80601fc823372a09c832a802529"><div class="ttname"><a href="namespacegoogle.html#afe9db80601fc823372a09c832a802529">google::ReprintFatalMessage</a></div><div class="ttdeci">void ReprintFatalMessage()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01260">base/logging.cc:1260</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_destination_html_a799e2628a1c44ccc1c3017ece67f41e7"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a799e2628a1c44ccc1c3017ece67f41e7">google::LogDestination::SetLogFilenameExtension</a></div><div class="ttdeci">static void SetLogFilenameExtension(const char *filename_extension)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00596">base/logging.cc:596</a></div></div>
<div class="ttc" id="namespacegoogle_html"><div class="ttname"><a href="namespacegoogle.html">google</a></div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00024">log_severity.h:24</a></div></div>
<div class="ttc" id="namespacefile_html"><div class="ttname"><a href="namespacefile.html">file</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2file_8cc_source.html#l00141">base/file.cc:141</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_a524ba2b8ce15ad01369c230545fc3ec6"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a524ba2b8ce15ad01369c230545fc3ec6">google::logging_internal::MyUserName</a></div><div class="ttdeci">const std::string &amp; MyUserName()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00247">logging_utilities.cc:247</a></div></div>
<div class="ttc" id="namespacegoogle_html_a57ac69eb66761ee6406d5e4a3f33ff87"><div class="ttname"><a href="namespacegoogle.html#a57ac69eb66761ee6406d5e4a3f33ff87">google::SetStderrLogging</a></div><div class="ttdeci">void SetStderrLogging(LogSeverity min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01563">base/logging.cc:1563</a></div></div>
<div class="ttc" id="namespacegoogle_html_aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02">google::COLOR_GREEN</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_aeeabea83ed8b4e356d4d36ece0fcb1bf"><div class="ttname"><a href="classgoogle_1_1_log_message.html#aeeabea83ed8b4e356d4d36ece0fcb1bf">google::LogMessage::~LogMessage</a></div><div class="ttdeci">~LogMessage()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01181">base/logging.cc:1181</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_aefae0ad3d1d866302a3d246ad4f03a32"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#aefae0ad3d1d866302a3d246ad4f03a32">google::LogMessage::LogMessageData::LogMessageData</a></div><div class="ttdeci">LogMessageData()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01063">base/logging.cc:1063</a></div></div>
<div class="ttc" id="namespacegoogle_html_a832c639941d33e43942c481d21c674ee"><div class="ttname"><a href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">google::fatal_msg_data_exclusive</a></div><div class="ttdeci">static LogMessage::LogMessageData fatal_msg_data_exclusive</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01051">base/logging.cc:1051</a></div></div>
<div class="ttc" id="structgoogle_1_1_log_message_1_1_log_message_data_html_ac515e5f5602db49593f96316f1b5c054"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">google::LogMessage::LogMessageData::line_</a></div><div class="ttdeci">int line_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00323">base/logging.cc:323</a></div></div>
<div class="ttc" id="namespacegoogle_html_a45f04ff1beb3af3882c99d3b63616dde"><div class="ttname"><a href="namespacegoogle.html#a45f04ff1beb3af3882c99d3b63616dde">google::SetLogFilenameExtension</a></div><div class="ttdeci">void SetLogFilenameExtension(const char *ext)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01559">base/logging.cc:1559</a></div></div>
<div class="ttc" id="classgoogle_1_1_log_message_html_a48387141df3f5afb48b012cc28ac244c"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">google::LogMessage::stream</a></div><div class="ttdeci">std::ostream &amp; stream()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01197">base/logging.cc:1197</a></div></div>
<div class="ttc" id="base_2logging_8cc_html_a5db64b999a212e4bd474880ea057009b"><div class="ttname"><a href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a></div><div class="ttdeci">#define DEFINE_CHECK_STROP_IMPL(name, func, expected)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01729">base/logging.cc:1729</a></div></div>
<div class="ttc" id="classgoogle_1_1base_1_1_logger_html_a0d77f27eb95c246d555904aaf08018eb"><div class="ttname"><a href="classgoogle_1_1base_1_1_logger.html#a0d77f27eb95c246d555904aaf08018eb">google::base::Logger::~Logger</a></div><div class="ttdeci">virtual ~Logger()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00368">base/logging.cc:368</a></div></div>
<div class="ttc" id="demon__profiler_8cc_html_ac072af30c4ffbc834bb4c681f6ecb514"><div class="ttname"><a href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a></div><div class="ttdeci">int64_t value</div><div class="ttdef"><b>Definition:</b> <a href="demon__profiler_8cc_source.html#l00044">demon_profiler.cc:44</a></div></div>
<div class="ttc" id="namespacegoogle_html_a9145952db85676dbaf27080ab7173b97"><div class="ttname"><a href="namespacegoogle.html#a9145952db85676dbaf27080ab7173b97">google::GetLoggingDirectories</a></div><div class="ttdeci">const vector&lt; string &gt; &amp; GetLoggingDirectories()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01683">base/logging.cc:1683</a></div></div>
<div class="ttc" id="logging__export_8h_html_a980c97856a47502c2877b93460f44f87"><div class="ttname"><a href="logging__export_8h.html#a980c97856a47502c2877b93460f44f87">GOOGLE_GLOG_DLL_DECL</a></div><div class="ttdeci">#define GOOGLE_GLOG_DLL_DECL</div><div class="ttdef"><b>Definition:</b> <a href="logging__export_8h_source.html#l00027">logging_export.h:27</a></div></div>
<div class="ttc" id="namespacegoogle_html_a70bf67dee61470b69573aae771282e30"><div class="ttname"><a href="namespacegoogle.html#a70bf67dee61470b69573aae771282e30">google::ShutdownGoogleLogging</a></div><div class="ttdeci">void ShutdownGoogleLogging()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01877">base/logging.cc:1877</a></div></div>
<div class="ttc" id="namespacegoogle_html_a060366d0d0ff85fce6de37e905fea54c"><div class="ttname"><a href="namespacegoogle.html#a060366d0d0ff85fce6de37e905fea54c">google::GLOG_WARNING</a></div><div class="ttdeci">const int GLOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00025">log_severity.h:25</a></div></div>
<div class="ttc" id="namespacegoogle_1_1logging__internal_html_aedfcd190e296797088cd453c4d6796a0"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#aedfcd190e296797088cd453c4d6796a0">google::logging_internal::UsecToCycles</a></div><div class="ttdeci">int64_t UsecToCycles(int64_t usec)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00233">logging_utilities.cc:233</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.18-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_a7cc1eeded8f693d0da6c729bc88c45a.html">ortools</a></li><li class="navelem"><a class="el" href="dir_8f9dc966244f4c6e9b2fa0dee1e4ef1a.html">base</a></li><li class="navelem"><a class="el" href="base_2logging_8cc.html">logging.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
